---
layout: post
title:  "Linux 5.x arm32 Usermanual"
date:   2019-05-06 14:45:30 +0800
categories: [Build]
excerpt: Linux 5.x arm32 Usermanual.
tags:
  - Linux
---

> [GitHub: BiscuitOS](https://github.com/BiscuitOS/BiscuitOS)
>
> Email: BuddyZhang1 <Buddy.zhang@aliyun.com>

## ç›®å½•

> - [å¼€å‘ç¯å¢ƒéƒ¨ç½²](#A)
>
>   - [ç¡¬ä»¶å‡†å¤‡](#A0)
>
>   - [è½¯ä»¶å‡†å¤‡](#A1)
>
> - [å†…æ ¸éƒ¨ç½²](#C)
>
>   - [5.x arm32 é¡¹ç›®éƒ¨ç½²](#C0)
>
>   - [å†…æ ¸é…ç½®](#C1)
>
>   - [å†…æ ¸ç¼–è¯‘](#C2)
>
>   - [rootfs åˆ¶ä½œ](#C3)
>
> - [BiscuitOS ä½¿ç”¨](#D)
>
>   - [BiscuitOS å®‰è£…](#D0)
>
>   - [BiscuitOS è¿è¡Œ](#D1)
>
> - [é©±åŠ¨éƒ¨ç½²](#E)
>
>   - [BiscuitOS é©±åŠ¨å¼€å‘](#E0)
>
>   - [é€šç”¨é©±åŠ¨å¼€å‘](#E1)
>
>   - [é©±åŠ¨å®è·µ](#E2)
>
> - [åº”ç”¨ç¨‹åºéƒ¨ç½²](#F)
>
>   - [BiscuitOS éƒ¨ç½²](#F0)
>
>   - [æ¸¸æˆéƒ¨ç½²](#F2)
>
> - [è°ƒè¯•éƒ¨ç½²](#G)
>
> - [é™„å½•/æèµ ](#Z)

------------------------------------------

<span id="A"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000L0.PNG)

## å¼€å‘ç¯å¢ƒéƒ¨ç½²

> - [é¡¹ç›®ç®€ä»‹](#A2)
>
> - [ç¡¬ä»¶å‡†å¤‡](#A0)
>
> - [è½¯ä»¶å‡†å¤‡](#A1)

-----------------------------------------------

<span id="A2"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000S.jpg)

## é¡¹ç›®ç®€ä»‹

BiscuitOS é¡¹ç›®æ˜¯ä¸€ä¸ªç”¨äºåˆ¶ä½œ Linux 0.xã€1.xã€2.xã€3.xã€4.xã€5.x
é€šç”¨ç²¾ç®€æ“ä½œç³»ç»Ÿï¼Œå…¶ç›®æ ‡æ˜¯ä¸ºå¼€å‘è€…æä¾›ä¸€å¥—çº¯è½¯ä»¶çš„ Qemu å®è·µå¹³å°
æˆ–è€…ç¡¬ä»¶ RaspberryPi å®è·µå¹³å°ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä¾¿æ·ã€ç®€å•ã€å¿«é€Ÿçš„
åœ¨å„ä¸ªç‰ˆæœ¬ä¸Šå®è·µ Linuxã€‚æ›´å¤š BiscuitOS ä¿¡æ¯è¯·èŒƒå›´ä¸‹åˆ—ç½‘ç«™:

> - [BiscuitOS ä¸»é¡µ](https://biscuitos.github.io/)
>
> - [BiscuitOS åšå®¢](https://biscuitos.github.io/blog/BiscuitOS_Catalogue/)

-----------------------------------------------

<span id="A0"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000M.jpg)

## ç¡¬ä»¶å‡†å¤‡

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/RPI/RPI000046.JPG)

ç”±äºé¡¹ç›®æ„å»ºåŸºäº Ubuntuï¼Œå› æ­¤éœ€è¦å‡†å¤‡ä¸€å°è¿è¡Œ
Ubuntu 14.04/16.04/18.04 çš„ä¸»æœºï¼Œä¸»æœºéœ€è¦ä¿æŒç½‘ç»œçš„è¿é€šã€‚

-----------------------------------------------

<span id="A1"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000K.jpg)

## è½¯ä»¶å‡†å¤‡

BiscuitOS åˆ¶ä½œçš„ç³»ç»Ÿéƒ½æ˜¯ç”±æºç ç¼–è¯‘è€Œæ¥ï¼Œè¿™ä¸ªå¼€å‘è€…å¸¦æ¥
æ›´å¤šæœ‰è¶£çš„å¯èƒ½ï¼Œå¼€å‘è€…åœ¨ä½¿ç”¨ BiscuitOS æ„å»º Linux 5.x
çš„ç³»ç»Ÿä¹‹å‰ï¼Œéœ€è¦åšå¥½å¦‚ä¸‹å‡†å¤‡:

> - [åŸºç¡€è½¯ä»¶å®‰è£…](#A10)
>
> - [BiscuitOS éƒ¨ç½²](#A11)

---------------------------------------------

#### <span id="A10">åŸºç¡€è½¯ä»¶å®‰è£…</span>

å¼€å‘è€…é¦–å…ˆå‡†å¤‡ä¸€å° Linux å‘è¡Œç‰ˆç”µè„‘ï¼Œæ¨è Ubuntu 16.04/Ubuntu 18.04,
Ubuntu ç”µè„‘çš„å®‰è£…å¯ä»¥ä¸Šç½‘æŸ¥æ‰¾ç›¸åº”çš„æ•™ç¨‹ã€‚å‡†å¤‡å¥½ç›¸åº”çš„å¼€å‘ä¸»æœºä¹‹åï¼Œ
æ¥ä¸‹æ¥æ˜¯å®‰è£…è¿è¡Œ BiscuitOS é¡¹ç›®æ‰€éœ€çš„åŸºç¡€å¼€å‘å·¥å…·ã€‚ä»¥ Ubuntu ä¸ºä¾‹
å®‰è£…åŸºç¡€çš„å¼€å‘å·¥å…·ã€‚å¼€å‘è€…å¯ä»¥æŒ‰å¦‚ä¸‹æ–‡æ¡£è¿›è¡Œå®‰è£… (å¿…é¡»):

> - [BiscuitOS åŸºç¡€å¼€å‘å·¥å…·å®‰è£…æŒ‡å—](https://biscuitos.github.io/blog/Develop_tools)

----------------------------------------

#### <span id="A11">BiscuitOS éƒ¨ç½²</span>

åŸºç¡€ç¯å¢ƒæ­å»ºå®Œæ¯•ä¹‹åï¼Œå¼€å‘è€…ä» GitHub ä¸Šè·å– BiscuitOS é¡¹ç›®æºç ï¼Œ
ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š

{% highlight bash %}
git clone https://github.com/BiscuitOS/BiscuitOS.git --depth=1
cd BiscuitOS
{% endhighlight %}

è‡³æ­¤ï¼ŒBiscuitOS å·²ç»éƒ¨ç½²å®Œæ¯•.
BiscuitOS ç›®å‰å·²ç»æ”¯æŒ 5.x arm32 çš„å¼€å‘éƒ¨ç½²ï¼Œå¼€å‘è€…åœ¨
éƒ¨ç½²å®Œ BiscuitOS ç¯å¢ƒä¹‹åï¼Œå¯ä»¥å‚è€ƒä¸‹é¢å‘½ä»¤è¿›è¡Œéƒ¨ç½²:

{% highlight bash %}
cd BiscuitOS
make linux-5.x-arm32_defconfig
make
cd BiscuitOS/output/linux-5.x-arm32
{% endhighlight %}

æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ä¹‹åï¼ŒBiscuitOS é¡¹ç›®å°±ä¼šè‡ªåŠ¨éƒ¨ç½² "linux 5.x arm32"
çš„å¼€å‘ç¯å¢ƒï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå„ä¸ªæ¨¡å—ç¼–è¯‘è§„åˆ™ï¼Œå¼€å‘è€…è¯·è‡ªè¡Œå‚è€ƒï¼Œä¾‹å¦‚:

{% highlight perl %}
 ____  _                _ _    ___  ____  
| __ )(_)___  ___ _   _(_) |_ / _ \/ ___|
|  _ \| / __|/ __| | | | | __| | | \___ \ 
| |_) | \__ \ (__| |_| | | |_| |_| |___) |
|____/|_|___/\___|\__,_|_|\__|\___/|____/ 

***********************************************
Output:
 BiscuitOS/output/linux-5.x-

linux:
 BiscuitOS/output/linux-5.x-arm32/linux/linux 

README:
 BiscuitOS/output/linux-5.x-arm32/README.md 

***********************************************
{% endhighlight %}

åœ¨ä¸Šé¢çš„è¾“å‡ºä¿¡æ¯ä¸­ï¼ŒæŒ‡å‡ºäº† "linux 5.x arm32" é¡¹ç›®
çš„ç›®å½•ä½ç½®ï¼Œä»¥åŠ linux æºç ç›®å½•ï¼Œæ›´é‡è¦çš„æ˜¯å„ä¸ªæ¨¡å—
ç¼–è¯‘è§„åˆ™ï¼Œå¼€å‘è€…åº”è¯¥é‡ç‚¹å‚è€ƒ README.md çš„å†…å®¹.

------------------------------------------

<span id="C"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000P.jpg)

## å†…æ ¸éƒ¨ç½²

BiscuitOS é¡¹ç›®çš„ç›®æ ‡å°±æ˜¯ä¸ºå¼€å‘è€…æä¾›ä¸€å¥—å¿«é€Ÿå®è·µå†…æ ¸çš„å¹³å°ï¼Œ
å› æ­¤ BiscuitOS æ”¯æŒå®Œæ•´çš„å†…æ ¸å¼€å‘ï¼Œå¼€å‘è€…è¯·å‚è€ƒä¸‹åˆ—æ­¥éª¤è¿›è¡Œå¼€å‘:

> - [5.x arm32 é¡¹ç›®éƒ¨ç½²](#C0)
>
> - [å†…æ ¸é…ç½®](#C1)
>
> - [å†…æ ¸ç¼–è¯‘](#C2)
>
> - [rootfs åˆ¶ä½œ](#C3)

------------------------------------------

<span id="C0"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000O.jpg)

## 5.x arm32 é¡¹ç›®éƒ¨ç½²

BiscuitOS ç›®å‰å·²ç»æ”¯æŒ 5.x arm32 çš„å¼€å‘éƒ¨ç½²ï¼Œå¼€å‘è€…åœ¨
éƒ¨ç½²å®Œ BiscuitOS ç¯å¢ƒä¹‹åï¼Œå¯ä»¥å‚è€ƒä¸‹é¢å‘½ä»¤è¿›è¡Œéƒ¨ç½²:

{% highlight bash %}
cd BiscuitOS
make linux-5.x-arm32_defconfig
make
cd BiscuitOS/output/linux-5.x-arm32
{% endhighlight %}

æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ä¹‹åï¼ŒBiscuitOS é¡¹ç›®å°±ä¼šè‡ªåŠ¨éƒ¨ç½² "linux 5.x arm32"
çš„å¼€å‘ç¯å¢ƒï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆå„ä¸ªæ¨¡å—ç¼–è¯‘è§„åˆ™ï¼Œå¼€å‘è€…è¯·è‡ªè¡Œå‚è€ƒï¼Œä¾‹å¦‚:

{% highlight perl %}
 ____  _                _ _    ___  ____  
| __ )(_)___  ___ _   _(_) |_ / _ \/ ___|
|  _ \| / __|/ __| | | | | __| | | \___ \ 
| |_) | \__ \ (__| |_| | | |_| |_| |___) |
|____/|_|___/\___|\__,_|_|\__|\___/|____/ 

***********************************************
Output:
 BiscuitOS/output/linux-5.x-

linux:
 BiscuitOS/output/linux-5.x-arm32/linux/linux 

README:
 BiscuitOS/output/linux-5.x-arm32/README.md 

***********************************************
{% endhighlight %}

åœ¨ä¸Šé¢çš„è¾“å‡ºä¿¡æ¯ä¸­ï¼ŒæŒ‡å‡ºäº† "linux 5.x arm32" é¡¹ç›®
çš„ç›®å½•ä½ç½®ï¼Œä»¥åŠ linux æºç ç›®å½•ï¼Œæ›´é‡è¦çš„æ˜¯å„ä¸ªæ¨¡å—
ç¼–è¯‘è§„åˆ™ï¼Œå¼€å‘è€…åº”è¯¥é‡ç‚¹å‚è€ƒ README.md çš„å†…å®¹.

------------------------------------------

<span id="C1"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000Q.jpg)

## å†…æ ¸é…ç½®

å¯¹äºå†…æ ¸é…ç½®ï¼Œæ ¹æ® README.md çš„æç¤ºï¼Œé…ç½®å†…æ ¸å¯ä»¥
å‚è€ƒå¦‚ä¸‹å‘½ä»¤:

{% highlight bash %}
cd BiscuitOS/output/linux-5.x-arm32/linux/linux
make ARCH=arm clean
make ARCH=arm vexpress_defconfig
make ARCH=arm menuconfig
{% endhighlight %}

------------------------------------------

<span id="C2"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000Y.jpg)

## å†…æ ¸ç¼–è¯‘

å†…æ ¸é…ç½®å®Œæ¯•ä¹‹åï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç¼–è¯‘å†…æ ¸ï¼Œæ ¹æ® README.md é‡Œæä¾›çš„
å‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼Œå…·ä½“å‘½ä»¤å¦‚ä¸‹:

{% highlight bash %}
make ARCH=arm CROSS_COMPILE=BiscuitOS/output/linux-5.x-arm32/arm-linux-gnueabi/arm-linux-gnueabi/bin/arm-linux-gnueabi- -j8
make ARCH=arm CROSS_COMPILE=BiscuitOS/output/linux-5.x-arm32/arm-linux-gnueabi/arm-linux-gnueabi/bin/arm-linux-gnueabi- dtbs
{% endhighlight %}

![LINUXP](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/BUDX000335.png)

------------------------------------------

<span id="C3"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000B.jpg)

## rootfs åˆ¶ä½œ

ä¸ºäº†ä½¿ BiscuitOS èƒ½å¤Ÿè¿è¡Œï¼Œå¼€å‘è€…éœ€è¦ä¸º BiscuitOS å‡†å¤‡è¿è¡Œå¿…å¤‡
çš„å·¥å…·ï¼Œæ‰€æœ‰çš„å¿…å¤‡å·¥å…·åœ¨ BiscuitOS é¡¹ç›®æ‰§è¡Œ make ä¹‹åéƒ½å·²ç»å‡†å¤‡å¥½ï¼Œ
ç°åœ¨å¼€å‘è€…å¯ä»¥é€‰æ‹©ä¼˜åŒ–æˆ–ä¸ä¼˜åŒ–è¿™äº›å·¥å…·ï¼Œä¼˜åŒ–çš„ç»“æœå°±æ˜¯æ˜¯ ROOTFS 
çš„ä½“ç§¯å°½å¯èƒ½çš„å°ã€‚å¦‚æœå¼€å‘è€…ä¸æƒ³ä¼˜åŒ–ï¼Œå¯ä»¥è·³è¿‡è¿™ä¸€èŠ‚ã€‚ä½¿ç”¨é»˜è®¤é…
ç½®æºç ç¼–è¯‘çš„ BusyBox ä½“ç§¯è¾ƒå¤§ï¼Œå¼€å‘è€…å¯ä»¥å‚ç…§å¦‚ä¸‹å‘½ä»¤ç¼©å‡ BusyBox

{% highlight bash %}
cd BiscuitOS/output/linux-5.x-arm32/busybox/busybox
make clean
make menuconfig
{% endhighlight %}

![LINUXP](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/BUDX000003.png)

é€‰æ‹© **Busybox Settings --->**

![LINUXP](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/BUDX000004.png)

é€‰æ‹© **Build Options --->**

![LINUXP](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/BUDX000005.png)

é€‰ä¸­ **Build BusyBox as a static binary (no shared libs)**ï¼Œä¿å­˜å¹¶é€€å‡ºã€‚ä½¿ç”¨
å¦‚ä¸‹å‘½ä»¤ç¼–è¯‘ BusyBox

{% highlight bash %}
make CROSS_COMPILE=BiscuitOS/output/linux-5.x-arm32/arm-linux-gnueabi/arm-linux-gnueabi/bin/arm-linux-gnueabi- -j8

make CROSS_COMPILE=BiscuitOS/output/linux-5.x-arm32/arm-linux-gnueabi/arm-linux-gnueabi/bin/arm-linux-gnueabi- install
{% endhighlight %}

ç¼–è¯‘å®Œä¸Šé¢çš„å·¥å…·å’Œ Linux ä¹‹åï¼Œè¿è¡Œå‰çš„æœ€åä¸€æ­¥å°±æ˜¯åˆ¶ä½œä¸€ä¸ªå¯è¿
è¡Œçš„ Rootfsã€‚å¼€å‘è€…å¯ä»¥ä½¿ç”¨ README ä¸­æä¾›çš„å‘½ä»¤è¿›è¡Œåˆ¶ä½œï¼Œå¦‚ä¸‹:

{% highlight bash %}
cd BiscuitOS/output/linux-5.x-arm32
./RunQemuKernel.sh pack
{% endhighlight %}

------------------------------------------

<span id="D"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000F.jpg)

## BiscuitOS ä½¿ç”¨

åœ¨å‡†å¤‡å®Œå„ä¸ªæ¨¡å—ä¹‹åï¼Œå¼€å‘è€…å®Œæˆæœ¬èŠ‚çš„å†…å®¹ä¹‹åï¼Œå°±å¯ä»¥è¿è¡Œä¸€ä¸ª
å®Œæ•´çš„ BiscuitOS ç³»ç»Ÿã€‚å¼€å‘è€…è¯·å‚è€ƒå¦‚ä¸‹å†…å®¹:

> - [BiscuitOS å®‰è£…](#D0)
>
> - [BiscuitOS è¿è¡Œ](#D1)

----------------------------------------

## <span id="D0">BiscuitOS å®‰è£…</span>

BiscuitOS ç³»ç»Ÿé•œåƒçš„å®‰è£…åˆ¶ä½œå¾ˆç®€å•ï¼Œè¯·å‚è€ƒå¦‚ä¸‹å‘½ä»¤:

{% highlight bash %}
cd BiscuitOS/output/linux-5.x-arm32
./RunQemuKernel.sh pack
{% endhighlight %}

è¿è¡Œä¸Šé¢çš„å‘½ä»¤ä¹‹åï¼Œä¼šç”Ÿæˆåä¸º "BiscuitOS.img" çš„æ–‡ä»¶ï¼Œ
è¯¥æ–‡ä»¶å°±æ˜¯ BiscuitOS ç³»ç»Ÿé•œåƒã€‚

----------------------------------------

## <span id="D1">BiscuitOS è¿è¡Œ</span>

BiscuitOS çš„è¿è¡Œå¾ˆç®€å•ï¼Œå¼€å‘è€…æ‰§è¡Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å³å¯:

{% highlight bash %}
cd BiscuitOS/output/linux-5.x-arm32
./RunQemuKernel.sh
{% endhighlight %}

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/RPI/Linux-5.x-arm32.png)

å¦‚æœéœ€è¦ä½¿ç”¨ç½‘ç»œåŠŸèƒ½ï¼Œè¯·ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤:

{% highlight bash %}
cd BiscuitOS/output/linux-5.x-arm32
./RunQemuKernel.sh net
{% endhighlight %}

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/mall/MALL000003.png)

è¿æ¥å¤–ç½‘

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/mall/MALL000005.png)

æ›´å¤šç½‘ç»œçš„ä½¿ç”¨è¯·å‚è€ƒ:

> - [BiscuitOS ç½‘ç»œä½¿ç”¨æ‰‹å†Œ](https://biscuitos.github.io/blog/Networking-Usermanual/)

------------------------------------------

<span id="E"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000M.jpg)

## é©±åŠ¨éƒ¨ç½²

BiscuitOS ç›®å‰å·²ç»å®Œæ•´æ”¯æŒé©±åŠ¨çš„å¼€å‘ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ BiscuitOS
æä¾›çš„é©±åŠ¨å¼€å‘æœºåˆ¶è¿›è¡Œé©±åŠ¨å¼€å‘ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€šç”¨çš„é©±åŠ¨å¼€å‘åŠæ³•
åœ¨ BiscuitOS ç³»ç»Ÿä¸Šè°ƒè¯•é©±åŠ¨ï¼Œå¼€å‘è€…å¯ä»¥å‚è€ƒå¦‚ä¸‹æ–‡æ¡£:

> - [BiscuitOS é©±åŠ¨å¼€å‘](#E0)
>
> - [é€šç”¨é©±åŠ¨å¼€å‘](#E1)
>
> - [é©±åŠ¨å®è·µ](#E2)

------------------------------------------

<span id="E0"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000P.jpg)

## BiscuitOS é©±åŠ¨å¼€å‘

BiscuitOS ä»¥åŠå®Œæ•´æ”¯æŒé©±åŠ¨å¼€å‘ä½“ç³»ï¼Œå¹¶åŸºäº Kbuild ç¼–è¯‘ç³»ç»Ÿï¼Œåˆ¶ä½œäº†ä¸€å¥—
ä¾¿æ·çš„é©±åŠ¨å¼€å‘ç¯å¢ƒï¼Œå¼€å‘è€…å¯ä»¥å‚è€ƒå¦‚ä¸‹æ­¥éª¤è¿›è¡Œå¿«é€Ÿå¼€å‘ï¼Œæœ¬æ¬¡ä»¥ä¸€ä¸ª Platform
é©±åŠ¨ä¸ºä¾‹è¿›è¡Œè®²è§£ã€‚

> - [Platform æºç è·å–](#E00)
>
> - [Platform æºç ç¼–è¯‘](#E01)
>
> - [Platform æ¨¡å—å®‰è£…](#E02)
>
> - [Platform æ¨¡å—ä½¿ç”¨](#E03)

--------------------------------------------

#### <span id="E00">Platform æºç è·å–</span>

é¦–å…ˆå¼€å‘è€…åº”è¯¥å‡†å¤‡åŸºäº Linux 5.x arm32 å¼€å‘ç¯å¢ƒï¼Œç„¶å
ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è·å¾— Platform æ‰€éœ€çš„å¼€å‘ç¯å¢ƒï¼š

{% highlight bash %}
cd BiscuitOS
make linux-5.x-arm32_defconfig
make menuconfig
{% endhighlight %}

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/RPI/RPI000038.png)

é€‰æ‹© "Package --->" å¹¶è¿›å…¥ä¸‹ä¸€çº§èœå•

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/RPI/RPI000304.png)

é€‰æ‹© "Platform: Device Driver and Application"ï¼Œå¹¶è¿›å…¥ä¸‹ä¸€çº§èœå•

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/RPI/RPI000305.png)

è®¾ç½® "platform Core Module --->" ä¸º "Y"ã€‚è®¾ç½®å®Œæ¯•ä¹‹åï¼Œ
ä¿å­˜å¹¶é€€å‡º.

-----------------------------------------------

#### <span id="E01">Platform æºç ç¼–è¯‘</span>

Platform çš„ç¼–è¯‘å¾ˆç®€å•ï¼Œåªéœ€æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å°±å¯ä»¥å¿«é€Ÿç¼–è¯‘:

{% highlight bash %}
make
cd BiscuitOS/output/linux-5.x-arm32/package/platform_core_module-0.0.1/
make prepare
make download
make
make install
make pack
{% endhighlight %}

-----------------------------------------------

#### <span id="E02">Platform æ¨¡å—å®‰è£…</span>

é©±åŠ¨çš„å®‰è£…ç‰¹åˆ«ç®€å•ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤:

{% highlight bash %}
cd BiscuitOS/output/linux-5.x-arm32/package/platform_core_module-0.0.1/
make install
make pack
{% endhighlight %}

-----------------------------------------------

#### <span id="E03">Platform æ¨¡å—ä½¿ç”¨</span>

æ¨¡å—çš„ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤:

{% highlight bash %}
cd BiscuitOS/output/linux-5.x-arm32/
./RunBiscuitOS.sh
{% endhighlight %}

è¿è¡Œ BiscuitOS ä¹‹åï¼Œåœ¨ BiscuitOS ä¸Šä½¿ç”¨å¦‚ä¸‹å‘½ä»¤:

{% highlight bash %}
cd lib/modules/5.x.0/extra/
insmod platform_core_module-0.0.1
{% endhighlight %}

------------------------------------------

<span id="E1"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000W.jpg)

## é€šç”¨é©±åŠ¨å¼€å‘

é€šç”¨é©±åŠ¨å¼€å‘æ¨¡å¼å°±æ˜¯æŒ‰æ ‡å‡†çš„å†…æ ¸é©±åŠ¨å¼€å‘æ–¹å¼ï¼Œå°†é©±åŠ¨æ”¾åˆ°å†…æ ¸
æºç æ ‘å†…æˆ–è€…æºç æ ‘ä¹‹å¤–è¿›è¡Œå¼€å‘ï¼Œè¿™é‡Œä»¥å†…æ ¸æºç æ ‘å†…å¼€å‘ä¸ºä¾‹:

> - [é©±åŠ¨æºç ](#E10)
>
> - [é©±åŠ¨å®‰ç½®](#E11)
>
> - [é©±åŠ¨é…ç½®](#E12)
>
> - [é©±åŠ¨ç¼–è¯‘](#E13)
>
> - [é©±åŠ¨å®‰è£…](#E14)
>
> - [é©±åŠ¨ä½¿ç”¨](#E15)

------------------------------------------

<span id="E10"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000J.jpg)

## é©±åŠ¨æºç 

å¼€å‘è€…é¦–å…ˆå‡†å¤‡ä¸€ä»½é©±åŠ¨æºç ï¼Œå¯ä»¥æ“ä½œå¦‚ä¸‹æºç ï¼Œæœ¬èŠ‚ä¸­ä½¿ç”¨ä¸€ä»½ 
misc é©±åŠ¨ï¼Œå¹¶å‘½åä¸º BiscuitOS_drv.cï¼Œå…·ä½“æºç å¦‚ä¸‹ï¼š

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/RPI/RPI000056.PNG)

------------------------------------------

<span id="E11"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000L.jpg)

## é©±åŠ¨å®‰ç½®

å¼€å‘è€…å‡†å¤‡å¥½æºç ä¹‹åï¼Œæ¥ç€å°†æºç æ·»åŠ åˆ°å†…æ ¸æºç æ ‘ã€‚å¼€å‘è€…åœ¨å†…æ ¸æºç æ ‘
ç›®å½•ä¸‹ï¼Œæ‰¾åˆ° drivers ç›®å½•ï¼Œç„¶ååœ¨ drivers ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º BiscuitOS
çš„ç›®å½•ï¼Œç„¶åå°†æºç  BiscuitOS_drv.c æ”¾å…¥åˆ° BiscuitOS ç›®å½•ä¸‹ã€‚æ¥ç€æ·»åŠ 
Kconfig å’Œ Makefile æ–‡ä»¶ï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹ï¼š

##### **Kconfig**

{% highlight bash %}
menuconfig BISCUITOS_DRV
    bool "BiscuitOS Driver"

if BISCUITOS_DRV

config BISCUITOS_MISC
    bool "BiscuitOS misc driver"

endif # BISCUITOS_DRV
{% endhighlight %}

##### **Makefile**

{% highlight bash %}
obj-$(CONFIG_BISCUITOS_MISC)  += BiscuitOS_drv.o
{% endhighlight %}

æ¥ç€ä¿®æ”¹å†…æ ¸æºç æ ‘ drivers ç›®å½•ä¸‹çš„ Kconfigï¼Œåœ¨æ–‡ä»¶çš„é€‚å½“ä½ç½®åŠ ä¸Šå¦‚ä¸‹ä»£ç ï¼š

{% highlight bash %}
source "drivers/BiscuitOS/Kconfig"
{% endhighlight %}

ç„¶åä¿®æ”¹å†…æ ¸æºç æ ‘ drivers ç›®å½•ä¸‹çš„ Makefileï¼Œåœ¨æ–‡ä»¶çš„æœ«å°¾ä¸ŠåŠ ä¸Šå¦‚ä¸‹ä»£ç ï¼š

{% highlight bash %}
obj-$(CONFIG_BISCUITOS_DRV)  += BiscuitOS/
{% endhighlight %}

------------------------------------------

<span id="E12"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000Z.jpg)

## é©±åŠ¨é…ç½®

å‡†å¤‡å¥½æ‰€éœ€çš„æ–‡ä»¶ä¹‹åï¼Œæ¥ä¸‹æ¥è¿›è¡Œé©±åŠ¨åœ¨å†…æ ¸æºç æ ‘ä¸­çš„é…ç½®ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤:

{% highlight bash %}
cd BiscuitOS/output/linux-5.x-arm32/linux/linux
make ARCH=arm menuconfig
{% endhighlight %}

![LINUXP](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/BUDX000337.png)

é¦–å…ˆåœ¨ç›®å½•ä¸­æ‰¾åˆ° **Device Driver --->** å›è½¦å¹¶è¿›å…¥å…¶ä¸­ã€‚

![LINUXP](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/BUDX000338.png)

æ¥ç€åœ¨ç›®å½•ä¸­æ‰¾åˆ° **BiscuitOS Driver --->** æŒ‰ Y é€‰ä¸­å¹¶æŒ‰å›è½¦é”®è¿›å…¥ã€‚

![LINUXP](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/BUDX000339.png)

æœ€åæŒ‰ Y é”®é€‰ä¸­ **BiscuitOS mis driver**ï¼Œä¿å­˜å¹¶é€€å‡ºå†…æ ¸é…ç½®

------------------------------------------

<span id="E13"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000Z.jpg)

## é©±åŠ¨ç¼–è¯‘

é…ç½®å®Œé©±åŠ¨ä¹‹åï¼Œæ¥ä¸‹æ¥å°†ç¼–è¯‘é©±åŠ¨ã€‚å¼€å‘è€…ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç¼–è¯‘é©±åŠ¨:

{% highlight bash %}
make ARCH=arm CROSS_COMPILE=BiscuitOS/output/linux-5.x-arm32/arm-linux-gnueabi/arm-linux-gnueabi/bin/arm-linux-gnueabi- modules -j4
make ARCH=arm INSTALL_MOD_PATH=BiscuitOS/output/linux-5.x-arm32/rootfs/rootfs/ modules_install
{% endhighlight %}

ä»ç¼–è¯‘çš„ log å¯ä»¥çœ‹å‡º BiscuitOS_drv.c å·²ç»è¢«ç¼–è¯‘è¿›å†…æ ¸ã€‚

![LINUXP](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/BUDX000100.jpg)

------------------------------------------

<span id="E14"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000X.jpg)

## é©±åŠ¨å®‰è£…

é©±åŠ¨å®‰è£…åˆ¶ä½œå¾ˆç®€å•ï¼Œè¯·å‚è€ƒå¦‚ä¸‹å‘½ä»¤:

{% highlight bash %}
cd BiscuitOS/output/linux-5.x-arm32
./RunQemuKernel.sh pack
{% endhighlight %}

-----------------------------------------------

#### <span id="E15">é©±åŠ¨ä½¿ç”¨</span>

æ¨¡å—çš„ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤:

{% highlight bash %}
cd BiscuitOS/output/linux-5.x-arm32/
./RunBiscuitOS.sh
{% endhighlight %}

è¿è¡Œ BiscuitOS ä¹‹åï¼Œåœ¨ BiscuitOS ä¸Šä½¿ç”¨å¦‚ä¸‹å‘½ä»¤:

{% highlight bash %}
cd lib/modules/5.x.0/kernel/driver/BiscuitOS/
insmod misc.ko
{% endhighlight %}

------------------------------------------

<span id="E2"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000Z.jpg)

## é©±åŠ¨å®è·µ

BiscuitOS æä¾›äº†ä¸°å¯Œçš„é©±åŠ¨å¼€å‘æ•™ç¨‹ï¼Œå¼€å‘è€…å¯ä»¥å‚è€ƒå¦‚ä¸‹æ–‡æ¡£:

> - [BiscuitOS é©±åŠ¨å®è·µåˆé›†](https://biscuitos.github.io/blog/BiscuitOS_Catalogue/#Enginerring)
> 
> - [BiscuitOS RaspberryPi é©±åŠ¨åˆé›†](https://biscuitos.github.io/blog/BiscuitOS_Catalogue/#RaspberryPi)

------------------------------------------

<span id="F"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000F.jpg)

## åº”ç”¨ç¨‹åºéƒ¨ç½²

BiscuitOS ç›®å‰æä¾›äº†ä¸€å¥—å®Œæ•´çš„åº”ç”¨ç¨‹åºå¼€å‘ç³»ç»Ÿï¼Œå¼€å‘è€…å¯ä»¥
ä½¿ç”¨è¿™å¥—ç³»ç»Ÿå¿«é€Ÿå®è·µåº”ç”¨ç¨‹åºï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹æ³•
åœ¨ BiscuitOS ä¸Šå®è·µåº”ç”¨ç¨‹åº:

> - [BiscuitOS éƒ¨ç½²](#F0)
>
> - [æ¸¸æˆéƒ¨ç½²](#F1)

----------------------------------

## <span id="F0">BiscuitOS éƒ¨ç½²</span>

BiscuitOS æä¾›äº†å¤šç§åŠ¨æ€åº“ã€é™æ€å—ã€GNU å·¥å…·ã€BiscuitOS åº”ç”¨ç¨‹åºï¼Œ
ä»¥åŠå„ç§å¼€æºé¡¹ç›®ï¼Œå¼€å‘è€…å¯ä»¥å‚è€ƒä¸‹æ–‡è¿›è¡Œä½¿ç”¨:

> - [BiscuitOS ä¸Šä½¿ç”¨ GNU hello é¡¹ç›®](https://biscuitos.github.io/blog/USER_hello/)
>
> - [BiscuitOS æ”¯æŒåº”ç”¨åˆ—è¡¨](https://biscuitos.github.io/blog/APP-Usermanual/)

----------------------------------

## <span id="F1">æ¸¸æˆéƒ¨ç½²</span>

BiscuitOS ä¹Ÿæ”¯æŒæ¸¸æˆï¼Œå¼€å‘è€…å¯ä»¥å‚è€ƒå¦‚ä¸‹æ–‡ç« ï¼Œä¸ºè‡ªå·±çš„
å¼€å‘ä¹‹æ—…å¸¦æ¥æ›´å¤šçš„å¿«ä¹:

> - [Snake è´ªåƒè›‡](https://biscuitos.github.io/blog/USER_snake/)
>
> - [2048](https://biscuitos.github.io/blog/USER_2048/)
>
> - [tetris ä¿„ç½—æ–¯æ–¹å—](https://biscuitos.github.io/blog/USER_tetris/)

------------------------------------------

<span id="G"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000T.jpg)

## è°ƒè¯•éƒ¨ç½²

BiscuitOS çš„ Linux å†…æ ¸ä¹Ÿæ”¯æŒå¤šç§è°ƒè¯•ï¼Œå…¶ä¸­æ¯”è¾ƒé‡
è¦çš„æ–¹å¼å°±æ˜¯ GDB è°ƒè¯•ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ GDB å¯¹å†…æ ¸è¿›
è¡Œå•æ­¥è°ƒè¯•ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š(å…·ä½“å‚ç…§ BiscuitOS ä¸­çš„ README)

é¦–å…ˆä½¿ç”¨ QEMU çš„è°ƒè¯•å·¥å…·ï¼Œå°†å†…æ ¸æŒ‚èµ·ç­‰å¾…è°ƒè¯•ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤:

{% highlight bash %}
cd BiscuitOS/output/linux-5.x-arm32
./RunQemuKernel.sh debug
{% endhighlight %}

![LINUXP](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/BUDX000315.png)

æ¥ç€åœ¨å¦å¤–ä¸€ä¸ªç»ˆç«¯ä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œä½œä¸º gdb server

{% highlight bash %}
BiscuitOS/output/linux-5.x-arm32/arm-linux-gnueabi/arm-linux-gnueabi/bin/arm-linux-gnueabi-gdb BiscuitOS/output/linux-5.x-arm32/linux/linux/vmlinux
{% endhighlight %}

è¾“å…¥ä»¥ä¸Šå‘½ä»¤ä¹‹åï¼Œåœ¨ç¬¬äºŒä¸ªç»ˆç«¯ä¸­ï¼Œä¼šè¿›å…¥ gdb æ¨¡å¼ï¼Œæ­¤æ—¶ä»¥æ­¤è¾“å…¥ä¸€ä¸‹å‘½åè¿›è¡Œ
gdb æŒ‚è½½ï¼š

{% highlight bash %}
(gdb) target remote :1234
{% endhighlight %}

ç„¶åå¼€å‘è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œå†…æ ¸è°ƒè¯•ï¼Œæ¯”å¦‚åœ¨ start_kernel å‡ºæ·»åŠ 
ä¸€ä¸ªæ–­ç‚¹è°ƒè¯•ï¼Œå¦‚ä¸‹:

{% highlight bash %}
(gdb) b start_kernel
(gdb) c
(gdb) list
(gdb) info reg
{% endhighlight %}

![LINUXP](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/BUDX000316.png)

æ›´å¤šå†…æ ¸è°ƒè¯•ï¼Œè¯·æŸ¥è€ƒæ–‡æ¡£:

> - [BiscuitOS è°ƒè¯•](https://biscuitos.github.io/blog/BiscuitOS_Catalogue/#Debug)

-----------------------------------------------

# <span id="Z">é™„å½•</span>

> [BiscuitOS Home](https://biscuitos.github.io/)
>
> [BiscuitOS Catalogue](https://biscuitos.github.io/blog/BiscuitOS_Catalogue/)
>
> [Linux Kernel](https://www.kernel.org/)
>
> [Bootlin: Elixir Cross Referencer](https://elixir.bootlin.com/linux/latest/source)

## æèµ ä¸€ä¸‹å§ ğŸ™‚

![MMU](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/HAB000036.jpg)
