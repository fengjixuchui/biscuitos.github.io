---
layout: post
title:  "Bitmap"
date:   2019-06-10 05:30:30 +0800
categories: [HW]
excerpt: BITMAP.
tags:
  - Tree
---

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000B.jpg)

> [Github: Bitmap](https://github.com/BiscuitOS/HardStack/tree/master/Algorithem/bitmap)
>
> Email: BuddyZhang1 <buddy.zhang@aliyun.com>

# ç›®å½•

> - [Bit åŸç†](#CS00)
>
>   - [Bit ç®€ä»‹](#A0)
>
>   - [Bit æ¡†æ¶](#A1)
>
> - [Bit æœ€å°å®è·µ](#B00)
>
>   - [Bit å†…æ ¸ä¸­æœ€å°å®è·µ](#B0)
>
>   - [Bit åœ¨åº”ç”¨ç¨‹åºä¸­æœ€å°å®è·µ](#B1)
>
> - [Bitmap åœ¨å†…æ ¸ä¸­çš„åº”ç”¨](#CS01)
>
>   - [Bitmap ä¸ã€æˆ–ã€éã€å¼‚æˆ–ã€ä¸éæ“ä½œ](#AD0)
>
>   - [Bitmap ç½®ä½ã€æ¸…é›¶ã€å¡«å……æ“ä½œ](#AD1)
>
>   - [Bitmap è½¬æ¢æ“ä½œ](#AD2)
>
>   - [Bitmap ä½ç§»æ“ä½œ](#AD3)
>
>   - [Bitmap æŸ¥æ‰¾æ“ä½œ](#AD4)
>
>   - [Bitmap æ©ç æ“ä½œ](#AD5)
>
>   - [Bitmap éå†æ“ä½œ](#AD7)
>
>   - [Bitmap å…¶ä½™æ“ä½œ](#AD6)
>
> - [Bitops åœ¨å†…æ ¸ä¸­çš„åº”ç”¨](#CS02)
>
>   - [Bitops ç½®ä½](#BD0)
>
>   - [Bitops æ¸…é›¶](#BD1)
>
>   - [Bitops ç¿»è½¬](#BD2)
>
>   - [Bitops æµ‹è¯•](#BD3)
>
>   - [Bitops éå†](#BD4)
>
>   - [Bitops ç§»ä½](#BD5)
>
> - [Bitmask åœ¨å†…æ ¸ä¸­çš„åº”ç”¨](#CS03)
>
> - [Bit find åœ¨å†…æ ¸ä¸­çš„åº”ç”¨](#CS04)
>
>   - [bit find: bitmap ç›¸å…³æ¥å£](#CD0)
>
>   - [bit find: bitops ç›¸å…³æ¥å£](#CD1)
>
>   - [bit find: ç¼–è¯‘å™¨ç›¸å…³çš„æ¥å£](#CD2)
>
>   - [bit find: å†…æ ¸æ€§èƒ½æµ‹è¯•](https://biscuitos.github.io/blog/BITMAP_PER_bit_find/)
>
> - [Bit åœ¨åº”ç”¨ç¨‹åºä¸­éƒ¨ç½²](https://biscuitos.github.io/blog/BITMAP_UserArrange/)
>
> - [bitmap è¿›é˜¶ç ”ç©¶](https://biscuitos.github.io/blog/BITMAP_Advance/)
>
> - [bitmap å¯è§†åŒ–å·¥å…·](#DE0)
>
> - [bitmap å†…æ ¸æ¥å£å‡½æ•°åˆ—è¡¨](#LIST)
>
> - [é™„å½•](#é™„å½•)

-----------------------------------

# <span id="CS00"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000A.jpg)

# Bit åŸç†

> - [Bit ç®€ä»‹](#A0)
>
> - [Bit æ¡†æ¶](#A1)

-------------------------------------------

### <span id="A0">Bit ç®€ä»‹</span>

bit ä¸­æ–‡ç¿»è¯‘ 'ä½'ï¼Œå³ä»£è¡¨è®¡ç®—æœºé‡Œæœ€å°çš„è®¡æ•°å•ä½ã€‚bit åœ¨è®¡ç®—æœºé‡Œå¯ç”¨äºè¡¨ç¤º
'0' å’Œ '1' ä¸¤ä¸ªå€¼ï¼Œç”±äºè¡¨å¾æ•°å­—ä¿¡å·é«˜ä½ç”µå¹³ï¼Œä¸ºè®¡ç®—æœºæä¾›äº†æœ€åŸºç¡€çš„æ•°æ®åŸºç¡€ã€‚
è®¡ç®—æœºä¸­ï¼Œå¤šä¸ª bit çš„é›†åˆæ„æˆäº†å›ºå®šé•¿åº¦ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å­—èŠ‚ï¼Œå­—ï¼ŒåŒå­—ç­‰
æ•°æ®ç±»å‹ï¼›å¤šä¸ª bit ä¹Ÿå¯ä»¥æ„æˆé•¿åº¦ä¸åŒçš„ä½å›¾ (bitmap), å› æ­¤ä½å›¾å°±æ˜¯åŒ…å«äº†å¤šä¸ª
bit çš„æ•°ç»„ã€‚

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/boot/BOOT000134.png)

ç”±äº bit çš„å€¼åªåŒ…å«äº† '0' å’Œ '1' ä¸¤ç§ç»“æœï¼Œå› æ­¤åœ¨è®¡ç®—æœºä¸­ï¼Œbit ç»å¸¸ç”¨äºæ ‡è¯†
æ•°æ®çš„çŠ¶æ€ã€‚ä¾‹å¦‚ä½¿ç”¨ bit æ ‡è¯†å¤–å›´ç¡¬ä»¶å¼€å…³çš„çŠ¶æ€ç­‰ã€‚bit ä»ä½ä½ (LSB) å¼€å§‹ç¼–å·
åˆ°é«˜ä½ (MSB) å°† bit å®šä¹‰ä¸ºæœ‰åºçš„ bit åºåˆ—ï¼Œç¨‹åºå¯ä»¥é€šè¿‡ç‰¹å®šçš„ç®—æ³•ï¼Œæœ‰åºçš„ç®¡ç†
æ¯ä¸ª bit çš„ä½¿ç”¨ï¼Œä»è€Œæ„é€ å¤æ‚çš„æ•°æ®ç»“æ„ã€‚

-----------------------------------

### <span id="A1">Bit æ¡†æ¶</span>

Linux å†…æ ¸å¹¿æ³›ä½¿ç”¨ bit ä½œä¸ºå…¶åŸºç¡€æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬ bitmap (ä½å›¾), bitops,
bitmask, bit find ç­‰ï¼ŒåŸºäºè¿™äº›åŸºç¡€æ•°æ®ç»“æ„ï¼Œå°† bit è¿ç”¨åˆ°å¤æ‚çš„æ•°æ®ç»“æ„
ä¸­ï¼Œä¾‹å¦‚ Bitï¼Œè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œè¿›ç¨‹ç®¡ç†ç­‰ã€‚å› æ­¤ bit æ˜¯å†…æ ¸è¿è¡Œå¿…ä¸å¯å°‘çš„éƒ¨åˆ†ã€‚

> bitmap ä½å›¾

Linux å®šä¹‰äº†ä½å›¾ bitmap ä¸º bit çš„æ•°ç»„ï¼Œæ•°ç»„çš„æˆå‘˜å°±æ˜¯ç‹¬ç«‹çš„ bitã€‚å†…æ ¸æä¾›
äº† bitmap çš„é€šç”¨æ¡†æ¶å’Œæ¥å£å‡½æ•°ï¼Œä»¥æ­¤ä¾¿æ·ä½¿ç”¨ bitmapï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š

{% highlight bash %}
linux/lib/bitmap.c æ–‡ä»¶åŒ…å«äº† bitmap çš„æ ¸å¿ƒå®ç°ä»¥åŠé€šç”¨æ¥å£ã€‚

linux/include/linux/bitmap.h bitmap å¤´æ–‡ä»¶ï¼ŒåŒ…å«äº† bitmap ç›¸å…³çš„å®ä»¥åŠå†…åµŒå‡½æ•°æ¥å£

linux/Documentation/core-api/kernel-api.rst bitmap å†…æ ¸æ–‡æ¡£
{% endhighlight %}

> bitops

Linux æä¾›äº†ä¸€å¥—ç”¨äºæ“ä½œä¸æœºå™¨ä½å®½ç›¸åŒçš„ä½æ“ä½œå‡½æ•°ï¼Œè¿™å¥—å‡½æ•°ç”¨äºæ“ä½œ bitmap
é•¿åº¦åœ¨ BITS_PER_LONG ä»¥å†…çš„ bit é›†åˆï¼ŒåŒ…æ‹¬äº† bit çš„ç½®ä½ï¼Œæ¸…é›¶ï¼Œä»¥åŠ
ç¿»è½¬æ“ä½œã€‚bitops çš„å‡½æ•°å®ç°ä¸ä½“ç³»æ¶æ„æœ‰å…³ï¼Œå› æ­¤ä¸åŒçš„ä½“ç³»ç»“æ„æœ‰ä¸åŒçš„
å®ç°æ–¹å¼ï¼Œä½†å®ç°çš„æ•ˆæœéƒ½æ˜¯ä¸€è‡´ï¼Œå› æ­¤ bitops åˆåˆ†ä¸ºé€šç”¨éƒ¨åˆ†å’Œä¸ä½“ç³»ç›¸å…³
éƒ¨åˆ†ã€‚Linux æä¾›äº†ä¸€å¥—é€šç”¨æ¡†æ¶æ¥å£å‡½æ•°ï¼Œå…¶å®šä¹‰åŸºæœ¬å¦‚ä¸‹ï¼š

{% highlight bash %}
linux/include/asm-generic/bitops/non-atomic.h    bitops å‡½æ•°æœ€é€šç”¨å®ç°ã€‚

linux/arch/arm/include/asm/bitops.h  ä¸ ARM ç›¸å…³çš„ bitops å‡½æ•°å®ç°
{% endhighlight %}

> bitmask

Linux æä¾›äº†ä¸€å¥—ç”¨äºæ©ç æ“ä½œçš„å‡½æ•°ã€‚ç”±äº bit æ˜¯å†…æ ¸çš„åŸºç¡€ç»„æˆéƒ¨åˆ†ï¼Œå¤šç§
å¤æ‚çš„æ•°æ®ç»“æ„éƒ½ä¹ŸåŸºäº bit å®ç°ï¼Œä¸ºäº†å®ç°å¤šä¸ª bit çš„æ©ç æ“ä½œï¼Œå†…æ ¸ä¹Ÿæä¾›
å¤šä¸ªå‡½æ•°ä»¥åŠå®ç”¨äºä¾¿æ·å®ç°å…¶åŠŸèƒ½ã€‚bitmask çš„å®ç°ä¸æœºå™¨çš„ä½å®½å®ç°å¯†åˆ‡ç›¸å…³ï¼Œ
å…¶å®ç°ä¸ BITS_PER_LONG çš„å®ç°æœ‰å…³ã€‚Linux æä¾›äº†ä¸€å¥—é€šè¿‡çš„æ¡†æ¶æ¥å£ï¼Œå…¶
å®šä¹‰å¦‚ä¸‹ï¼š

{% highlight bash %}
linux/include/linux/bitmap.h åŒ…å«äº† bitmap æ©ç ç›¸å…³çš„å®ä»¥åŠå†…åµŒå‡½æ•°æ¥å£

linux/include/bits.h  åŒ…å«äº† bit åŸºç¡€çš„æ©ç å®ã€‚
{% endhighlight %}

> bit find

ç”±äº bitmap åŒ…å«äº†å¤šä¸ª bitï¼Œéœ€è¦åœ¨ bit é›†åˆä¸­æ‰¾åˆ°ç¬¦åˆè¦æ±‚çš„ bitï¼Œ
ç”±äº bit åºä¸å¤§å°ç«¯æœ‰å…³ç³»ï¼Œå¹¶ä¸ä½“ç³»ç»“æ„ä¹Ÿæœ‰å…³ç³»ï¼Œå› æ­¤å†…æ ¸æä¾›äº†ä¸€å¥—
ç”¨äºæŸ¥æ‰¾ bit çš„å‡½æ•°æ¥å£ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š

{% highlight bash %}
linux/lib/find_bit.c  bit æŸ¥æ‰¾çš„é€šç”¨æ¥å£å‡½æ•°

linux/arch/arm/include/asm/bitops.h ARM ç›¸å…³çš„ bit find æ¥å£ã€‚

linux/lib/find_bit_benchmark.c bit æŸ¥æ‰¾æµ‹è¯•æ¥å£å‡½æ•°
{% endhighlight %}

--------------------------------------------------
<span id="B00"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000B.jpg)

## Bit å®è·µ

> - [Bit å†…æ ¸ä¸­æœ€å°å®è·µ](#B0)
>
> - [Bit åœ¨åº”ç”¨ç¨‹åºä¸­æœ€å°å®è·µ](#B1)

--------------------------------------
<span id="B0"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000C.jpg)

### Bit å†…æ ¸ä¸­æœ€å°å®è·µ

> - [é©±åŠ¨æºç ](#AAé©±åŠ¨æºç )
>
> - [é©±åŠ¨å®‰è£…](#AAé©±åŠ¨å®‰è£…)
>
> - [é©±åŠ¨é…ç½®](#AAé©±åŠ¨é…ç½®)
>
> - [é©±åŠ¨ç¼–è¯‘](#AAé©±åŠ¨ç¼–è¯‘)
>
> - [é©±åŠ¨è¿è¡Œ](#AAé©±åŠ¨è¿è¡Œ)
>
> - [é©±åŠ¨åˆ†æ](#AAé©±åŠ¨åˆ†æ)

#### <span id="AAé©±åŠ¨æºç ">é©±åŠ¨æºç </span>

> [å®è·µæºç  Bit on GitHub](https://github.com/BiscuitOS/HardStack/tree/master/Algorithem/bitmap/API/mini)

{% highlight c %}
/*
 * Bitmap.
 *
 * (C) 2019.06.10 <buddy.zhang@aliyun.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 */

#include <linux/kernel.h>
#include <linux/init.h>

/* header of bitmap */
#include <linux/bitmap.h>

static __init int bitmap_demo_init(void)
{
	unsigned long bitmap = 0xf000000;

	/* Set range bits on bitmap */
	bitmap_set(&bitmap, 4, 8);
	printk("Bitmap: %#lx\n", bitmap);

	return 0;
}
device_initcall(bitmap_demo_init);
{% endhighlight %}

#### <span id="é©±åŠ¨å®‰è£…">é©±åŠ¨å®‰è£…</span>

é©±åŠ¨çš„å®‰è£…å¾ˆç®€å•ï¼Œé¦–å…ˆå°†é©±åŠ¨æ”¾åˆ° drivers/BiscuitOS/ ç›®å½•ä¸‹ï¼Œå‘½åä¸º Bit.cï¼Œ
ç„¶åä¿®æ”¹ Kconfig æ–‡ä»¶ï¼Œæ·»åŠ å†…å®¹å‚è€ƒå¦‚ä¸‹ï¼š

{% highlight bash %}
diff --git a/drivers/BiscuitOS/Kconfig b/drivers/BiscuitOS/Kconfig
index 4edc5a5..1a9abee 100644
--- a/drivers/BiscuitOS/Kconfig
+++ b/drivers/BiscuitOS/Kconfig
@@ -6,4 +6,14 @@ if BISCUITOS_DRV
config BISCUITOS_MISC
        bool "BiscuitOS misc driver"
+config BISCUITOS_Bit
+       bool "Bit"
+
+if BISCUITOS_Bit
+
+config DEBUG_BISCUITOS_Bit
+       bool "Bit mini"
+
+endif # BISCUITOS_Bit
+
endif # BISCUITOS_DRV
{% endhighlight %}

æ¥ç€ä¿®æ”¹ Makefileï¼Œè¯·å‚è€ƒå¦‚ä¸‹ä¿®æ”¹ï¼š

{% highlight bash %}
diff --git a/drivers/BiscuitOS/Makefile b/drivers/BiscuitOS/Makefile
index 82004c9..9909149 100644
--- a/drivers/BiscuitOS/Makefile
+++ b/drivers/BiscuitOS/Makefile
@@ -1 +1,2 @@
obj-$(CONFIG_BISCUITOS_MISC)     += BiscuitOS_drv.o
+obj-$(CONFIG_BISCUITOS_BITMAP)     += bitmap.o
--
{% endhighlight %}

#### <span id="é©±åŠ¨é…ç½®">é©±åŠ¨é…ç½®</span>

é©±åŠ¨é…ç½®è¯·å‚è€ƒä¸‹é¢æ–‡ç« ä¸­å…³äºé©±åŠ¨é…ç½®ä¸€èŠ‚ã€‚åœ¨é…ç½®ä¸­ï¼Œå‹¾é€‰å¦‚ä¸‹é€‰é¡¹ï¼Œå¦‚ä¸‹ï¼š

{% highlight bash %}
Device Driver--->
    [*]BiscuitOS Driver--->
        [*]Bitmap
            [*] bitmap mini
{% endhighlight %}

å…·ä½“è¿‡ç¨‹è¯·å‚è€ƒï¼š

> [Linux 5.0 å¼€å‘ç¯å¢ƒæ­å»º -- é©±åŠ¨é…ç½®](https://biscuitos.github.io/blog/Linux-5.0-arm32-Usermanual/#%E9%A9%B1%E5%8A%A8%E9%85%8D%E7%BD%AE)

#### <span id="AAé©±åŠ¨ç¼–è¯‘">é©±åŠ¨ç¼–è¯‘</span>

é©±åŠ¨ç¼–è¯‘ä¹Ÿè¯·å‚è€ƒä¸‹é¢æ–‡ç« å…³äºé©±åŠ¨ç¼–è¯‘ä¸€èŠ‚ï¼š

> [Linux 5.0 å¼€å‘ç¯å¢ƒæ­å»º -- é©±åŠ¨ç¼–è¯‘](https://biscuitos.github.io/blog/Linux-5.0-arm32-Usermanual/#%E7%BC%96%E8%AF%91%E9%A9%B1%E5%8A%A8)

#### <span id="AAé©±åŠ¨è¿è¡Œ">é©±åŠ¨è¿è¡Œ</span>

é©±åŠ¨çš„è¿è¡Œï¼Œè¯·å‚è€ƒä¸‹é¢æ–‡ç« ä¸­å…³äºé©±åŠ¨è¿è¡Œä¸€èŠ‚ï¼š

> [Linux 5.0 å¼€å‘ç¯å¢ƒæ­å»º -- é©±åŠ¨è¿è¡Œ](https://biscuitos.github.io/blog/Linux-5.0-arm32-Usermanual/#%E9%A9%B1%E5%8A%A8%E8%BF%90%E8%A1%8C)

å¯åŠ¨å†…æ ¸ï¼Œå¹¶æ‰“å°å¦‚ä¸‹ä¿¡æ¯ï¼š

{% highlight bash %}
usbcore: registered new interface driver usbhid
usbhid: USB HID core driver
Bitmap: 0xf000ff0
aaci-pl041 10004000.aaci: ARM AC'97 Interface PL041 rev0 at 0x10004000, irq 24
aaci-pl041 10004000.aaci: FIFO 512 entries
oprofile: using arm/armv7-ca9
{% endhighlight %}

--------------------------------------
<span id="B1"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000E.jpg)

### Bit åœ¨åº”ç”¨ç¨‹åºä¸­æœ€å°å®è·µ

> - [å®è·µæºç ](#å®è·µæºç )
>
> - [æºç ç¼–è¯‘](#æºç ç¼–è¯‘)
>
> - [æºç è¿è¡Œ](#æºç è¿è¡Œ)
>
> - [è¿è¡Œåˆ†æ](#è¿è¡Œåˆ†æ)

#### <span id="å®è·µæºç ">å®è·µæºç </span>

> [å®è·µæºç  Bit on GitHub](https://github.com/BiscuitOS/HardStack/tree/master/Algorithem/bitmap/Basic)

å¼€å‘è€…ä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è·å¾—ï¼š

{% highlight ruby %}
wget https://raw.githubusercontent.com/BiscuitOS/HardStack/master/Algorithem/bitmap/Basic/Makefile
wget https://raw.githubusercontent.com/BiscuitOS/HardStack/master/Algorithem/bitmap/Basic/bitmap_run.c
wget https://raw.githubusercontent.com/BiscuitOS/HardStack/master/Algorithem/bitmap/Basic/bitmap.c
wget https://raw.githubusercontent.com/BiscuitOS/HardStack/master/Algorithem/bitmap/Basic/bitmap.h
{% endhighlight %}

å®è·µæºç å…·ä½“å†…å®¹å¦‚ä¸‹ï¼š

{% highlight c %}
/*
 * Bitmap Manual.
 *
 * (C) 2019.06.10 <buddy.zhang@aliyun.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 */
#include <stdio.h>
#include <stdlib.h>

/* bitmap header */
#include <bitmap.h>

int main()
{
	unsigned long bitmap[2] = {0};
	u64 map = 0x123456789abcdef;

	/* Cover u64 to bitmap */
	bitmap_from_u64(bitmap, map);
	printf("%#llx cover to [0]%#lx [1]%#lx\n", map, bitmap[0], bitmap[1]);

	return 0;
}
{% endhighlight %}

--------------------------------------

#### <span id="æºç ç¼–è¯‘">æºç ç¼–è¯‘</span>

ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼š

{% highlight ruby %}
make clean
make
{% endhighlight %}

--------------------------------------

#### <span id="æºç è¿è¡Œ">æºç è¿è¡Œ</span>

å®è·µæºç çš„è¿è¡Œå¾ˆç®€å•ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œå¹¶ä¸”è¿è¡Œç»“æœå¦‚ä¸‹ï¼š

{% highlight bash %}
0x123456789abcdef cover to [0]0x123456789abcdef [1]0
{% endhighlight %}

-----------------------------------
<span id="CS01"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000I.jpg)

# Bitmap åœ¨å†…æ ¸ä¸­çš„åº”ç”¨

Linux å®šä¹‰äº†ä½å›¾ bitmap ä¸º bit çš„æ•°ç»„ï¼Œæ•°ç»„çš„æˆå‘˜å°±æ˜¯ç‹¬ç«‹çš„ bitã€‚å†…æ ¸æä¾›
äº† bitmap çš„é€šç”¨æ¡†æ¶å’Œæ¥å£å‡½æ•°ï¼Œä»¥æ­¤ä¾¿æ·ä½¿ç”¨ bitmapï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š

{% highlight bash %}
linux/lib/bitmap.c æ–‡ä»¶åŒ…å«äº† bitmap çš„æ ¸å¿ƒå®ç°ä»¥åŠé€šç”¨æ¥å£ã€‚

linux/include/linux/bitmap.h bitmap å¤´æ–‡ä»¶ï¼ŒåŒ…å«äº† bitmap ç›¸å…³çš„å®ä»¥åŠå†…åµŒå‡½æ•°æ¥å£

linux/Documentation/core-api/kernel-api.rst bitmap å†…æ ¸æ–‡æ¡£
{% endhighlight %}

> - [Bitmap ä¸ã€æˆ–ã€éã€å¼‚æˆ–ã€ä¸éæ“ä½œ](#AD0)
>
> - [Bitmap ç½®ä½ã€æ¸…é›¶ã€å¡«å……æ“ä½œ](#AD1)
>
> - [Bitmap è½¬æ¢æ“ä½œ](#AD2)
>
> - [Bitmap ä½ç§»æ“ä½œ](#AD3)
>
> - [Bitmap æŸ¥æ‰¾æ“ä½œ](#AD4)
>
> - [Bitmap æ©ç æ“ä½œ](#AD5)
>
> - [Bitmap éå†æ“ä½œ](#AD7)
>
> - [Bitmap å…¶ä½™æ“ä½œ](#AD6)

------------------------------------

#### <span id="AD0">Bitmap ä¸ã€æˆ–ã€éã€å¼‚æˆ–ã€ä¸éæ“ä½œ</span>

Bitmap æä¾›äº†ä¸€å¥—åŸºç¡€çš„ç®—æœ¯é€»è¾‘ï¼ŒåŒ…æ‹¬ä¸è¿ç®—ã€æˆ–è¿ç®—ã€éè¿ç®—ã€å¼‚æˆ–è¿ç®—ã€ä¸é
è¿ç®—ç­‰ï¼Œè¿™å°†å¤§å¤§å¢åŠ  bitmap çš„å¯ç”¨æ€§ï¼Œå…¶å‡½æ•°æ¥å£åŠå®è·µæ¥å£å¦‚ä¸‹ï¼š

> - [\_\_bitmap_and: bitmap ä¸è¿ç®—](https://biscuitos.github.io/blog/BITMAP___bitmap_and)
>
> - [bitmap_and: bitmap ä¸è¿ç®—](https://biscuitos.github.io/blog/BITMAP_bitmap_and)
>
> - [\_\_bitmap_or: bitmap æˆ–è¿ç®—](https://biscuitos.github.io/blog/BITMAP___bitmap_or)
>
> - [bitmap_or: bitmap æˆ–è¿ç®—](https://biscuitos.github.io/blog/BITMAP_bitmap_or)
>
> - [\_\_bitmap_xor: bitmap å¼‚æˆ–è¿ç®—](https://biscuitos.github.io/blog/BITMAP___bitmap_xor)
>
> - [bitmap_xor: bitmap å¼‚æˆ–è¿ç®—](https://biscuitos.github.io/blog/BITMAP_bitmap_xor)
>
> - [\_\_bitmap_complement: bitmap éè¿ç®—](https://biscuitos.github.io/blog/BITMAP___bitmap_complement)
>
> - [bitmap_complement: bitmap éè¿ç®—](https://biscuitos.github.io/blog/BITMAP_bitmap_complement)
>
> - [\_\_bitmap_andnot: bitmap ä¸éè¿ç®—](https://biscuitos.github.io/blog/BITMAP___bitmap_andnot)
>
> - [bitmap_andnot: bitmap ä¸éè¿ç®—](https://biscuitos.github.io/blog/BITMAP_bitmap_andnot)

------------------------------------

#### <span id="AD1">Bitmap ç½®ä½ã€æ¸…é›¶ã€å¡«å……æ“ä½œ</span>

Bitmap æä¾›äº†ä¸€å¥—ç”¨äºç½®ä½ã€æ¸…é›¶ã€å¡«å……çš„å‡½æ•°æ¥å£ï¼Œä½¿ç”¨è¿™äº›æ¥å£å¯ä»¥ä¾¿æ·çš„å¯¹ç‰¹å®š
ä½è¿›è¡Œæ“ä½œï¼Œå…¶å‡½æ•°æ¥å£åŠå®è·µå…¥å£å¦‚ä¸‹ï¼š

> - [\_\_bitmap_set: bitmap ç½®ä½æ“ä½œ](https://biscuitos.github.io/blog/BITMAP___bitmap_set)
>
> - [bitmap_set: bitmap ç½®ä½æ“ä½œ](https://biscuitos.github.io/blog/BITMAP_bitmap_set)
>
> - [\_\_bitmap_clear: bitmap æ¸…é›¶æ“ä½œ](https://biscuitos.github.io/blog/BITMAP___bitmap_clear)
>
> - [bitmap_clear: bitmap æ¸…é›¶æ“ä½œ](https://biscuitos.github.io/blog/BITMAP_bitmap_clear)
>
> - [bitmap_fill: bitmap å¡«å……æ“ä½œ](https://biscuitos.github.io/blog/BITMAP_bitmap_fill)

------------------------------------

#### <span id="AD2">Bitmap è½¬æ¢æ“ä½œ</span>

åœ¨ Linux ä¸­ï¼Œç”±äºä¸åŒçš„ä½å®½å¯¼è‡´ bitmap æ‰€åŒ…å«çš„ bit æ•°ç›®ä¸ä¸€æ ·ï¼Œå…¶ä¸ BITS_PER_LONG
æœ‰ç›´æ¥çš„å…³ç³»ï¼Œ32-bit ç³»ç»Ÿä¸­ï¼ŒBITS_PER_LONG ä»£è¡¨ä¸€ä¸ª long å˜é‡ä¸­åŒ…å« 32 ä¸ª bitï¼›åœ¨
64-bit ç³»ç»Ÿä¸­ï¼ŒBIST_PER_LONG ä»£è¡¨ä¸€ä¸ª long å˜é‡ä¸­åŒ…å« 64 ä¸ª bitã€‚ç”±äºä½“ç³»ä½å®½çš„
å·®å¼‚ï¼Œå†…æ ¸ä¹Ÿä¸º bitmap æä¾›äº†ä¸€å¥—ç”¨äºè½¬æ¢çš„å‡½æ•°ï¼Œå‡½æ•°æ¥å£åŠå®è·µå…¥å£å¦‚ä¸‹ï¼š

> - [bitmap_from_arr32: å°† 32bit çš„æ•°ç»„è½¬æ¢æˆä¸€ä¸ª bitmap](https://biscuitos.github.io/blog/BITMAP_bitmap_from_arr32)
>
> - [bitmap_to_arr32: å°† bitmap çš„æ•°ç»„è½¬æ¢æˆä¸€ä¸ª 32 ä½æ•°ç»„](https://biscuitos.github.io/blog/BITMAP_bitmap_to_arr32)
>
> - [bitmap_from_u64: å°† 64 ä½å˜é‡è½¬æ¢æˆ bitmap](https://biscuitos.github.io/blog/BITMAP_bitmap_from_u64)
>
> - [bitmap_parse: å°†å­—ç¬¦ä¸²è½¬æ¢æˆ bitmap](https://biscuitos.github.io/blog/BITMAP_bitmap_parse)

------------------------------------

#### <span id="AD3">Bitmap ä½ç§»æ“ä½œ</span>

Bitmap åœ¨ç‰¹å®šçš„éœ€æ±‚ä¸­éœ€è¦å°†å…¶å·¦ç§»æˆ–å³ç§»å¤šä¸ª bitï¼Œå› æ­¤å†…æ ¸æä¾›äº†ä¸“é—¨ç”¨äº bitmap
ä½ç§»çš„å‡½æ•°ï¼Œå‡½æ•°æ¥å£åŠå®è·µå…¥å£å¦‚ä¸‹ï¼š

> - [\_\_bitmap_shift_left: bitmap å·¦ç§»æ“ä½œ](https://biscuitos.github.io/blog/BITMAP___bitmap_shift_left)
>
> - [bitmap_shift_left: bitmap å·¦ç§»æ“ä½œ](https://biscuitos.github.io/blog/BITMAP_bitmap_shift_left)
>
> - [\_\_bitmap_shift_right: bitmap å³ç§»æ“ä½œ](https://biscuitos.github.io/blog/BITMAP___bitmap_shift_right)
>
> - [bitmap_shift_right: bitmap å³ç§»æ“ä½œ](https://biscuitos.github.io/blog/BITMAP_bitmap_shift_right)

------------------------------------

#### <span id="AD4">Bitmap æŸ¥æ‰¾æ“ä½œ</span>

Bitmap åŒæ ·æä¾›äº†ä¸€å¥—ç”¨äºæŸ¥æ‰¾ç‰¹å®š bit çš„å‡½æ•°æ¥å£ï¼Œä»¥ä¾¿åœ¨ bitmap ä¸­æ‰¾åˆ°æŒ‡å®š
çš„ bitï¼Œå‡½æ•°æ¥å£åŠå®è·µå…¥å£å¦‚ä¸‹ï¼š

> - [bitmap_find_next_zero_area_off: bitmap ä¸­æ‰¾åˆ°æ•´å—é›¶åŒºåŸŸ](https://biscuitos.github.io/blog/BITMAP_bitmap_find_next_zero_area_off)
>
> - [find_first_bit: bitmap ä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªç½®ä½çš„ä½ç½®](https://biscuitos.github.io/blog/BITMAP_find_first_bit)
>
> - [find_first_zero_bit: bitmap ä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¸…é›¶çš„ä½ç½®](https://biscuitos.github.io/blog/BITMAP_find_first_zero_bit)
>
> - [find_last_bit: bitmap ä¸­æ‰¾åˆ°æœ€åä¸€ä¸ªç½®ä½çš„ä½ç½®](https://biscuitos.github.io/blog/BITMAP_find_last_bit)

------------------------------------

#### <span id="AD5">Bitmap æ©ç æ“ä½œ</span>

Bitmap ä¹Ÿæä¾›äº†ä¸€å¥—ç”¨äºæ©ç çš„æ“ä½œï¼Œå’Œ bitops çš„æ©ç ç›¸æ¯”ï¼Œbitmap æä¾›çš„æ©ç 
æ¶‰åŠçš„ bit èŒƒå›´æ›´å¹¿é˜”ï¼Œå¯ä»¥è¶…å‡º BITS_PER_LONG çš„é™åˆ¶ï¼Œå‡½æ•°æ¥å£åŠå®è·µå…¥å£å¦‚ä¸‹ï¼š

> - [BITMAP_FIRST_WORD_MASK: bitmap ä½ä½æŒ‡å®šä¸ª bit ä¸ºé›¶ï¼Œå…¶ä½™å…¨ 1 çš„æ©ç ](https://biscuitos.github.io/blog/BITMAP_BITMAP_FIRST_WORD_MASK)
>
> - [BITMAP_LAST_WORD_MASK: bitmap ä½ä½æŒ‡å®šä¸ª bit ä¸º 1ï¼Œå…¶ä½™å…¨ 0 çš„æ©ç ](https://biscuitos.github.io/blog/BITMAP_BITMAP_LAST_WORD_MASK)

------------------------------------

#### <span id="AD7">Bitmap éå†æ“ä½œ</span>

Bitmap æä¾›äº†ä¸€å¥—å‡½æ•°ç”¨äºéå† bitmap ä¸­ç½®ä½æˆ–è€…æ¸…é›¶çš„ä½ç½®ï¼Œè¿™äº›å‡½æ•°ä¸­å¯ä»¥ä»
å¤´è¿˜æ˜¯éå†ï¼Œä¹Ÿå¯ä»¥ä»æŒ‡å®šä½ç½®éå†ï¼Œå‡½æ•°æ¥å£åŠå®è·µå…¥å£å¦‚ä¸‹ï¼š

> - [for_each_clear_bit_from: ä»æŒ‡å®šä½ç½®éå† bitmap æ¸…é›¶ bit](https://biscuitos.github.io/blog/BITMAP_for_each_clear_bit_from)
>
> - [for_each_clear_bit: ä»å¤´å¼€å§‹éå† bitmap æ¸…é›¶ bit](https://biscuitos.github.io/blog/BITMAP_for_each_clear_bit)
>
> - [for_each_set_bit: ä»å¤´å¼€å§‹éå† bitmap ç½®ä½ bit](https://biscuitos.github.io/blog/BITMAP_for_each_set_bit)
>
> - [for_each_set_bit_from: ä»æŒ‡å®šä½ç½®å¼€å§‹éå† bitmap ç½®ä½ bit](https://biscuitos.github.io/blog/BITMAP_for_each_set_bit_from)

------------------------------------

#### <span id="AD6">Bitmap å…¶ä½™æ“ä½œ</span>

Bitmap è¿˜æä¾›äº†å…¶ä½™ç‰¹å®šéœ€æ±‚çš„å‡½æ•°ï¼Œå‡½æ•°æ¥å£åŠå®è·µå…¥å£å¦‚ä¸‹ï¼š

> - [bitmap_copy: å¤åˆ¶ bitmap](https://biscuitos.github.io/blog/BITMAP_bitmap_copy)
>
> - [bitmap_copy_clear_tail: å¤åˆ¶ bitmap ä½ä½](https://biscuitos.github.io/blog/BITMAP_bitmap_copy_clear_tail)
>
> - [bitmap_empty: åˆ¤æ–­ bitmap æ˜¯å¦ä¸ºç©º](https://biscuitos.github.io/blog/BITMAP_bitmap_empty)
>
> - [bitmap_equal: åˆ¤æ–­ bitmap æ˜¯å¦ç›¸ç­‰](https://biscuitos.github.io/blog/BITMAP_bitmap_equal)
>
> - [bitmap_weight: è·å¾— bitmap ä¸­ 1 çš„ä¸ªæ•°](https://biscuitos.github.io/blog/BITMAP_bitmap_weight)

-----------------------------------
<span id="CS02"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000L.jpg)

# Bitops åœ¨å†…æ ¸ä¸­çš„åº”ç”¨

Linux æä¾›äº†ä¸€å¥—ç”¨äºæ“ä½œä¸æœºå™¨ä½å®½ç›¸åŒçš„ä½æ“ä½œå‡½æ•°ï¼Œè¿™å¥—å‡½æ•°ç”¨äºæ“ä½œ bitmap
é•¿åº¦åœ¨ BITS_PER_LONG ä»¥å†…çš„ bit é›†åˆï¼ŒåŒ…æ‹¬äº† bit çš„ç½®ä½ï¼Œæ¸…é›¶ï¼Œä»¥åŠ
ç¿»è½¬æ“ä½œã€‚bitops çš„å‡½æ•°å®ç°ä¸ä½“ç³»æ¶æ„æœ‰å…³ï¼Œå› æ­¤ä¸åŒçš„ä½“ç³»ç»“æ„æœ‰ä¸åŒçš„
å®ç°æ–¹å¼ï¼Œä½†å®ç°çš„æ•ˆæœéƒ½æ˜¯ä¸€è‡´ï¼Œå› æ­¤ bitops åˆåˆ†ä¸ºé€šç”¨éƒ¨åˆ†å’Œä¸ä½“ç³»ç›¸å…³
éƒ¨åˆ†ã€‚Linux æä¾›äº†ä¸€å¥—é€šç”¨æ¡†æ¶æ¥å£å‡½æ•°ï¼Œå…¶å®šä¹‰åŸºæœ¬å¦‚ä¸‹ï¼š

{% highlight bash %}
linux/include/asm-generic/bitops/non-atomic.h    bitops å‡½æ•°æœ€é€šç”¨å®ç°ã€‚

linux/arch/arm/include/asm/bitops.h  ä¸ ARM ç›¸å…³çš„ bitops å‡½æ•°å®ç°
{% endhighlight %}

> - [Bitops ç½®ä½](#BD0)
>
> - [Bitops æ¸…é›¶](#BD1)
>
> - [Bitops ç¿»è½¬](#BD2)
>
> - [Bitops æµ‹è¯•](#BD3)
>
> - [Bitops éå†](#BD4)
>
> - [Bitops ç§»ä½](#BD5)

------------------------------------

#### <span id="BD0">Bitops ç½®ä½</span>

bitops çš„ç½®ä½æ“ä½œå°±æ˜¯å°† bit ä¸­ç‰¹å®šçš„ä½è®¾ç½®ä¸º '1' çš„æ“ä½œã€‚ç”±äºç½®ä½æ“ä½œä¸ä½“ç³»æœ‰å…³ï¼Œ
å› æ­¤å†…æ ¸æä¾›äº†ç½®ä½çš„å…¬ç”¨éƒ¨åˆ†å’Œä¸ä½“ç³»ç›¸å…³çš„éƒ¨åˆ†ï¼Œå…¶å®šä¹‰åŸºæœ¬å¦‚ä¸‹ï¼š

> - [set_bit: bitops ç½®ä½é€šç”¨æ¥å£](https://biscuitos.github.io/blog/BITMAP_set_bit)
>
> - [\_\_set_bit: bitops ç½®ä½æ¥å£](https://biscuitos.github.io/blog/BITMAP___set_bit)
>
> - [\_\_test_and_set_bit: bitops ç½®ä½å¹¶è¿”å›åŸå§‹å€¼çš„é€šç”¨æ¥å£](https://biscuitos.github.io/blog/BITMAP___test_and_set_bit)
>
> - [\_\_\_\_atomic_set_bit: bitops åŸå­ç½®ä½æ¥å£](https://biscuitos.github.io/blog/BITMAP_____atomic_set_bit)
>
> - [\_\_\_\_atomic_test_and_set_bit: bitops åŸå­ç½®ä½å¹¶è¿”å›åŸå§‹å€¼æ¥å£](https://biscuitos.github.io/blog/BITMAP_____atomic_test_and_set_bit)

------------------------------------

#### <span id="BD1">Bitops æ¸…é›¶</span>

bitops çš„æ¸…é›¶æ“ä½œå°±æ˜¯å°† bit ä¸­ç‰¹å®šçš„ä½è®¾ç½®ä¸º '0' çš„æ“ä½œã€‚ç”±äºç½®ä½æ“ä½œä¸ä½“ç³»æœ‰å…³ï¼Œ
å› æ­¤å†…æ ¸æä¾›äº†æ¸…é›¶çš„å…¬ç”¨éƒ¨åˆ†å’Œä¸ä½“ç³»ç›¸å…³çš„éƒ¨åˆ†ï¼Œå…¶å®šä¹‰åŸºæœ¬å¦‚ä¸‹ï¼š

> - [clear_bit: bitops æ¸…é›¶é€šç”¨æ¥å£](https://biscuitos.github.io/blog/BITMAP_clear_bit)
>
> - [\_\_clear_bit: bitops æ¸…é›¶æ¥å£](https://biscuitos.github.io/blog/BITMAP___clear_bit)
>
> - [test_and_clear_bit: bitops æ¸…é›¶å¹¶é€šç”¨æ¥å£](https://biscuitos.github.io/blog/BITMAP_test_and_clear_bit)
>
> - [\_\_test_and_clear_bit: bitops æ¸…é›¶å¹¶é€šç”¨æ¥å£](https://biscuitos.github.io/blog/BITMAP___test_and_clear_bit)
>
> - [\_\_\_\_atomic_clear_bit: bitops åŸå­æ¸…é›¶æ¥å£](https://biscuitos.github.io/blog/BITMAP_____atomic_clear_bit)
>
> - [\_\_\_\_atomic_test_and_clear_bit: bitops åŸå­æ¸…é›¶å¹¶è¿”å›åŸå§‹å€¼æ¥å£](https://biscuitos.github.io/blog/BITMAP_____atomic_test_and_clear_bit)

------------------------------------

#### <span id="BD2">Bitops ç¿»è½¬</span>

bitops çš„ç¿»è½¬æ“ä½œå°±æ˜¯å°† bit ä¸­ç‰¹å®šçš„ä½è®¾ç½®å€¼è®¾ç½®ä¸ºç›¸åçš„æ“ä½œã€‚ç”±äºç¿»è½¬æ“ä½œä¸ä½“ç³»æœ‰å…³ï¼Œ
å› æ­¤å†…æ ¸æä¾›äº†ç¿»è½¬çš„å…¬ç”¨éƒ¨åˆ†å’Œä¸ä½“ç³»ç›¸å…³çš„éƒ¨åˆ†ï¼Œå…¶å®šä¹‰åŸºæœ¬å¦‚ä¸‹ï¼š

> - [change_bit: bitops ç¿»è½¬é€šç”¨æ¥å£](https://biscuitos.github.io/blog/BITMAP_change_bit)
>
> - [\_\_change_bit: bitops ç¿»è½¬æ¥å£](https://biscuitos.github.io/blog/BITMAP___change_bit)
>
> - [test_and_change_bit: bitops ç¿»è½¬å¹¶è¿”å›åŸå§‹å€¼æ¥å£](https://biscuitos.github.io/blog/BITMAP_test_and_change_bit)
>
> - [\_\_test_and_change_bit: bitops ç¿»è½¬å¹¶è¿”å›åŸå§‹å€¼æ¥å£](https://biscuitos.github.io/blog/BITMAP___test_and_change_bit)
>
> - [\_\_\_\_atomic_change_bit: bitops åŸå­ç¿»è½¬æ¥å£](https://biscuitos.github.io/blog/BITMAP_____atomic_change_bit)
>
> - [\_\_\_\_atomic_test_and_change_bit: bitops åŸå­ç¿»è½¬å¹¶è¿”å›åŸå§‹å€¼æ¥å£](https://biscuitos.github.io/blog/BITMAP_____atomic_test_and_change_bit)

------------------------------------

#### <span id="BD3">Bitops æµ‹è¯•</span>

bitops çš„æµ‹è¯•æ“ä½œå°±æ˜¯è¿”å› bit ä¸­ç‰¹å®šçš„ä½çš„å€¼ï¼Œå…¶å®šä¹‰åŸºæœ¬å¦‚ä¸‹ï¼š

> - [test_bit](https://biscuitos.github.io/blog/BITMAP_test_bit)

------------------------------------

#### <span id="BD4">Bitops éå†æ“ä½œ</span>

Bitops æä¾›äº†ä¸€å¥—å‡½æ•°ç”¨äºéå† bit ä¸­ç½®ä½æˆ–è€…æ¸…é›¶çš„ä½ç½®ï¼Œè¿™äº›å‡½æ•°ä¸­å¯ä»¥ä»
å¤´è¿˜æ˜¯éå†ï¼Œä¹Ÿå¯ä»¥ä»æŒ‡å®šä½ç½®éå†ï¼Œä½†ä¸èƒ½è¶…è¿‡ BITS_PER_LONGï¼Œå‡½æ•°æ¥å£åŠå®è·µå…¥å£å¦‚ä¸‹ï¼š

> - [for_each_clear_bit_from: ä»æŒ‡å®šä½ç½®éå† bit æ¸…é›¶ bit](https://biscuitos.github.io/blog/BITMAP_for_each_clear_bit_from)
>
> - [for_each_clear_bit: ä»å¤´å¼€å§‹éå† bit æ¸…é›¶ bit](https://biscuitos.github.io/blog/BITMAP_for_each_clear_bit)
>
> - [for_each_set_bit: ä»å¤´å¼€å§‹éå† bit ç½®ä½ bit](https://biscuitos.github.io/blog/BITMAP_for_each_set_bit)
>
> - [for_each_set_bit_from: ä»æŒ‡å®šä½ç½®å¼€å§‹éå† bit ç½®ä½ bit](https://biscuitos.github.io/blog/BITMAP_for_each_set_bit_from)

------------------------------------

#### <span id="BD5">Bitops ç§»ä½</span>

Bitops æä¾›äº†ä¸€å¥—å‡½æ•°ç”¨äºç§»ä½æ“ä½œï¼Œå‡½æ•°æ¥å£å¦‚ä¸‹:

> - [rol32 å¾ªç¯å·¦ç§»ä¸€ä¸ª 32 ä½æ•´æ•°](https://biscuitos.github.io/blog/BITMAP_rol32)
>
> - [ror32 å¾ªç¯å³ç§»ä¸€ä¸ª 32 ä½æ•´æ•°](https://biscuitos.github.io/blog/BITMAP_ror32)
>
> - [ror16 å¾ªç¯å³ç§»ä¸€ä¸ª 16 ä½æ•´æ•°](https://biscuitos.github.io/blog/BITMAP_ror16)
>
> - [rol16 å¾ªç¯å·¦ç§»ä¸€ä¸ª 16 ä½æ•´æ•°](https://biscuitos.github.io/blog/BITMAP_rol16)
>
> - [rol8 å¾ªç¯å·¦ç§»ä¸€ä¸ª 8 ä½æ•´æ•°](https://biscuitos.github.io/blog/BITMAP_rol8)
>
> - [ror8 å¾ªç¯å³ç§»ä¸€ä¸ª 8 ä½æ•´æ•°](https://biscuitos.github.io/blog/BITMAP_ror8)


-----------------------------------
<span id="CS03"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000T.jpg)

# Bitmask åœ¨å†…æ ¸ä¸­çš„åº”ç”¨

Linux æä¾›äº†ä¸€å¥—ç”¨äºæ©ç æ“ä½œçš„å‡½æ•°ã€‚ç”±äº bit æ˜¯å†…æ ¸çš„åŸºç¡€ç»„æˆéƒ¨åˆ†ï¼Œå¤šç§
å¤æ‚çš„æ•°æ®ç»“æ„éƒ½ä¹ŸåŸºäº bit å®ç°ï¼Œä¸ºäº†å®ç°å¤šä¸ª bit çš„æ©ç æ“ä½œï¼Œå†…æ ¸ä¹Ÿæä¾›
å¤šä¸ªå‡½æ•°ä»¥åŠå®ç”¨äºä¾¿æ·å®ç°å…¶åŠŸèƒ½ã€‚bitmask çš„å®ç°ä¸æœºå™¨çš„ä½å®½å®ç°å¯†åˆ‡ç›¸å…³ï¼Œ
å…¶å®ç°ä¸ BITS_PER_LONG çš„å®ç°æœ‰å…³ã€‚Linux æä¾›äº†ä¸€å¥—é€šè¿‡çš„æ¡†æ¶æ¥å£ï¼Œå…¶
å®šä¹‰å¦‚ä¸‹ï¼š

{% highlight bash %}
linux/include/linux/bitmap.h åŒ…å«äº† bitmap æ©ç ç›¸å…³çš„å®ä»¥åŠå†…åµŒå‡½æ•°æ¥å£

linux/include/bits.h  åŒ…å«äº† bit åŸºç¡€çš„æ©ç å®ã€‚
{% endhighlight %}

ç”±äºæ©ç ä¸ä½“ç³»ä½å®½æœ‰ç›´æ¥çš„è”ç³»ï¼Œé‚£ä¹ˆåœ¨è®¨è®ºæ©ç ä¹‹å‰ï¼Œå¼€å‘è€…å¯ä»¥å…ˆäº†è§£å„ç§æ•°æ®
ç±»å‹çš„é•¿åº¦ï¼Œå¦‚ä¸‹ï¼š

{% highlight bash %}
char/unsigned char               8-bit
short/unsigned short            16-bit
int/unsigend short              32-bit
long/unsigned long              32-bit(32 ä½ç³»ç»Ÿ)ã€64-bit (64 ä½ç³»ç»Ÿ)
long long/unsigned long long    64-bit
{% endhighlight %}

å†…æ ¸ä½¿ç”¨ BITS_PER_LONG å®šä¹‰äº† long/unsigned long æ‰€åŒ…å«çš„ bit æ•°ï¼Œä»¥æ­¤
ä¸ºåŸºç¡€ï¼Œæ„å»ºå†…æ ¸ä¸­çš„ bitmap ä»¥åŠ bitmaskã€‚å†…æ ¸ä¹Ÿå®šä¹‰äº† BITS_PER_LONG_LONG å®šä¹‰
äº†ä¸€ä¸ª long long/unsigned long long æ‰€åŒ…å«çš„ bit æ•°ã€‚å†…æ ¸çš„å¾ˆå¤šå®çš„ä½ç§»ä¹Ÿ
åŸºäºä½å®½é•¿åº¦ï¼Œå¦‚ u/ul/ull/U/UL/ULL å…¶å®šä¹‰å¦‚ä¸‹ï¼š

{% highlight bash %}
1U                      32-bit
1UL                     32-bit(32 ä½ç³»ç»Ÿ)ã€64-bit (64 ä½ç³»ç»Ÿ)
1ULL                    64-bit
{% endhighlight %}

åŒç†å†…æ ¸ä¸­åœ¨ä½¿ç”¨ printkã€sprintf çš„æ ‡å‡†åŒ–å‚æ•°çš„æ—¶å€™ï¼Œä¹Ÿé™å®šäº†ä½å®½ï¼Œå¦‚ä¸‹ï¼š

{% highlight bash %}
%d/%u/%x                      32-bit
%ld/%lu/%lx                   32-bit(32 ä½ç³»ç»Ÿ)ã€64-bit (64 ä½ç³»ç»Ÿ)
%lld/%llu/%llx                64-bit
{% endhighlight %}

linux ä¸ºäº†æ»¡è¶³æ‰€æœ‰çš„ bit éœ€æ±‚ï¼Œå®šä¹‰äº†å¤šç§æ©ç ï¼Œå¼€å‘è€…å¯ä»¥å‚è€ƒå¦‚ä¸‹è¿›è¡Œå®è·µ
å’Œä½¿ç”¨ï¼š

> - [BIT: 1UL å†…åªæœ‰ç‰¹å®šä½ç½®ä½çš„æ©ç ](https://biscuitos.github.io/blog/BITMAP_BIT)
>
> - [BIT_MASK: BITS_PER_LONG èŒƒå›´å†…åªæœ‰ç‰¹å®šä½ç½®ä½çš„æ©ç ](https://biscuitos.github.io/blog/BITMAP_BIT_MASK)
>
> - [BIT_ULL: 64 bit èŒƒå›´å†…åªæœ‰ç‰¹å®šä½ç½®ä½çš„æ©ç ](https://biscuitos.github.io/blog/BITMAP_BIT_ULL)
>
> - [BIT_ULL_MASK: 64 bit èŒƒå›´å†…åªæœ‰ç‰¹å®šä½ç½®ä½çš„æ©ç ](https://biscuitos.github.io/blog/BITMAP_BIT_ULL_MASK)
>
> - [BIT_ULL_WORD: è®¡ç®— nr bit æ‰€åŒ…å«çš„ BITS_PER_LONG_LONG æ•°ç›®](https://biscuitos.github.io/blog/BITMAP_BIT_ULL_WORD)
>
> - [BIT_WORD: è®¡ç®— nr bit æ‰€åŒ…å«çš„ BITS_PER_LONG æ•°ç›®](https://biscuitos.github.io/blog/BITMAP_BIT_WORD)
>
> - [BITS_PER_BYTE: ä¸€ä¸ªå­—èŠ‚æ‰€åŒ…å«çš„ bit æ•°](https://biscuitos.github.io/blog/BITMAP_BITS_PER_BYTE)
>
> - [BITS_PER_LONG: ä¸€ä¸ª long æ‰€åŒ…å«çš„ bit æ•°](https://biscuitos.github.io/blog/BITMAP_BITS_PER_LONG)
>
> - [BITS_PER_LONG_LONG: ä¸€ä¸ª long long æ‰€åŒ…å«çš„ bit æ•°](https://biscuitos.github.io/blog/BITMAP_BITS_PER_LONG_LONG)
>
> - [BITMAP_LAST_WORD_MASK: bitmap ä¸­ä½ä½ä¸º 1ï¼Œå…¶ä½™å…¨ä¸º 0 çš„æ©ç ](https://biscuitos.github.io/blog/BITMAP_BITMAP_LAST_WORD_MASK)
>
> - [BITMAP_LAST_WORD_MASK: bitmap ä¸­ä½ä½ä¸º 0ï¼Œå…¶ä½™å…¨ä¸º 1 çš„æ©ç ](https://biscuitos.github.io/blog/BITMAP_BITMAP_LAST_WORD_MASK)
>
> - [BITS_PER_TYPE: è®¡ç®—æŸç§æ•°æ®ç±»å‹åŒ…å«çš„ bit æ•°](https://biscuitos.github.io/blog/BITMAP_BITS_PER_TYPE)
>
> - [BITS_TO_LONGS: ç”¨äºè®¡ç®— nr ä¸ª bit éœ€è¦ä½¿ç”¨å¤šå°‘ä¸ª long](https://biscuitos.github.io/blog/BITMAP_BITS_TO_LONGS)
>
> - [GENMASK: åœ¨ UL èŒƒå›´å†…ç”Ÿæˆç‰¹å®šèŒƒå›´å†…å…¨ä¸º 1 çš„æ©ç ](https://biscuitos.github.io/blog/BITMAP_GENMASK)
>
> - [GENMASK_ULL: åœ¨ ULL èŒƒå›´å†…ç”Ÿæˆç‰¹å®šèŒƒå›´å†…å…¨ä¸º 1 çš„æ©ç ](https://biscuitos.github.io/blog/BITMAP_GENMASK_ULL)

-----------------------------------
<span id="CS04"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000M.jpg)

# Bit find åœ¨å†…æ ¸ä¸­çš„åº”ç”¨

ç”±äº bitmap åŒ…å«äº†å¤šä¸ª bitï¼Œéœ€è¦åœ¨ bit é›†åˆä¸­æ‰¾åˆ°ç¬¦åˆè¦æ±‚çš„ bitï¼Œ
ç”±ç”±äº bit åºä¸å¤§å°ç«¯æœ‰å…³ç³»ï¼Œå¹¶ä¸ä½“ç³»ç»“æ„ä¹Ÿæœ‰å…³ç³»ï¼Œå› æ­¤å†…æ ¸æä¾›äº†ä¸€å¥—
ç”¨äºæŸ¥æ‰¾ bit çš„å‡½æ•°æ¥å£ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š

{% highlight bash %}
linux/lib/find_bit.c  bit æŸ¥æ‰¾çš„é€šç”¨æ¥å£å‡½æ•°

linux/arch/arm/include/asm/bitops.h ARM ç›¸å…³çš„ bit find æ¥å£ã€‚

linux/lib/find_bit_benchmark.c bit æŸ¥æ‰¾æµ‹è¯•æ¥å£å‡½æ•°
{% endhighlight %}

> - [bit find: bitmap ç›¸å…³æ¥å£](#CD0)
>
> - [bit find: bitops ç›¸å…³æ¥å£](#CD1)
>
> - [bit find: ç¼–è¯‘å™¨ç›¸å…³çš„æ¥å£](#CD2)
>
> - [bit find: å†…æ ¸æ€§èƒ½æµ‹è¯•](https://biscuitos.github.io/blog/BITMAP_PER_bit_find/)

------------------------------------

#### <span id="CD0">bit find: bitmap ç›¸å…³æ¥å£</span>

å†…æ ¸æä¾›äº†ä¸€å¥—é€šç”¨çš„ bit find æ¥å£ï¼Œç”¨äºæŸ¥æ‰¾ç‰¹æ®Šéœ€æ±‚çš„ bit ä½ç½®ï¼Œæ¥å£è¯´æ˜
ä»¥åŠå®è·µå…¥å£å¦‚ä¸‹ï¼š

> - [find_first_bit: æŸ¥æ‰¾ç¬¬ä¸€ä¸ªç½®ä½çš„ä½ç½®](https://biscuitos.github.io/blog/BITMAP_find_first_bit)
>
> - [find_first_zero_bit: æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ¸…é›¶çš„ä½ç½®](https://biscuitos.github.io/blog/BITMAP_find_first_zero_bit)
>
> - [find_last_bit: æ‰¾åˆ°æœ€åä¸€ä¸ªç½®ä½çš„ä½ç½®](https://biscuitos.github.io/blog/BITMAP_find_last_bit)
>
> - [\_find_next_bit: æŸ¥æ‰¾ä¸‹ä¸€ä¸ªç¬¦åˆè¦æ±‚çš„ä½ç½®](https://biscuitos.github.io/blog/BITMAP_SC/#_find_next_bit)
>
> - [find_next_and_bit: æŸ¥æ‰¾ä¸‹ä¸€ä¸ªç½®ä½çš„ä½ç½®ï¼Œä¸ä¸Šç‰¹å®šçš„å€¼](https://biscuitos.github.io/blog/BITMAP_find_next_and_bit)
>
> - [find_next_bit: æŸ¥æ‰¾ä¸‹ä¸€ä¸ªç½®ä½çš„ä½ç½®](https://biscuitos.github.io/blog/BITMAP_find_next_bit)
>
> - [find_next_zero_bit: æŸ¥æ‰¾ä¸‹ä¸€ä¸ªæ¸…é›¶çš„ä½ç½®](https://biscuitos.github.io/blog/BITMAP_find_next_zero_bit)

------------------------------------

#### <span id="CD1">bit find: bitops ç›¸å…³æ¥å£</span>

å†…æ ¸ä¹Ÿæä¾›äº†ä¸€å¥— bit find çš„æ¥å£ï¼Œç”¨äºåœ¨ BITS_PER_LONG èŒƒå›´å†…æ‰¾åˆ°éœ€æ±‚çš„
ä½ç½®ï¼Œæ¥å£è¯´æ˜ä»¥åŠå®è·µå…¥å£å¦‚ä¸‹ï¼š

> - [\_\_fls: æ‰¾åˆ°æœ€åä¸€ä¸ªç½®ä½çš„ä½ç½®](https://biscuitos.github.io/blog/BITMAP___fls)
>
> - [fls: æ‰¾åˆ°æœ€åä¸€ä¸ªç½®ä½çš„ä½ç½®](https://biscuitos.github.io/blog/BITMAP_fls)
>
> - [\_\_ffs: æ‰¾åˆ°ç¬¬ä¸€ä¸ªç½®ä½çš„ä½ç½®](https://biscuitos.github.io/blog/BITMAP___ffs)
>
> - [ffs: æ‰¾åˆ°ç¬¬ä¸€ä¸ªç½®ä½çš„ä½ç½®](https://biscuitos.github.io/blog/BITMAP_ffs)
>
> - [ffz: æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¸…é›¶çš„ä½ç½®](https://biscuitos.github.io/blog/BITMAP_ffz)

------------------------------------

#### <span id="CD2">bit find: ç¼–è¯‘å™¨ç›¸å…³çš„æ¥å£</span>

ä¸ºäº†åŠ é€Ÿ bit çš„æŸ¥æ‰¾ï¼ŒGCC ç¼–è¯‘å™¨ä¹Ÿæä¾›äº†ä¸€å¥—å‡½æ•°ç”¨äº bit çš„æŸ¥æ‰¾ï¼Œè¿™å¥—
å‡½æ•°æŸ¥æ‰¾ bit çš„èŒƒå›´é™å®šåœ¨ BITS_PER_LONG å†…ã€‚å¦‚ä¸‹ï¼š

> - __builtin_ffs() æ‰¾åˆ°ç¬¬ä¸€ä¸ªç½®ä½çš„ä½ç½®
>
> - __builtin_clz() æ‰¾åˆ°æœ€åä¸€ä¸ªæ¸…é›¶çš„ä½ç½®
>
> - __builtin_ctzl() æ‰¾åˆ°ç¬¬ä¸€ä¸ªç½®ä½çš„ä½ç½®
>
> - __builtin_clzl() æ‰¾åˆ°æœ€åä¸€ä¸ªç½®ä½çš„ä½ç½®

-----------------------------------

<span id="DE0"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000G.jpg)

# bitmap å¯è§†åŒ–å·¥å…·

Ubuntu æä¾›äº†ä¸€ä¸ª bitmap çš„å¯è§†åŒ–å·¥å…·ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ bitmap å¯è§†åŒ–å·¥å…·æ¥
å­¦ä¹ è°ƒè¯• bitmapã€‚å¼€å‘è€…å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ä½¿ç”¨è¯¥å·¥å…·ï¼š

{% highlight c %}
$> bitmap
{% endhighlight %}

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/boot/BOOT000135.png)

-----------------------------------

<span id="LIST"></span>

![](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/IND00000L.jpg)

## Bit å†…æ ¸æ¥å£å‡½æ•°åˆ—è¡¨

> - [\_\_\_\_atomic_change_bit](https://biscuitos.github.io/blog/BITMAP_____atomic_change_bit)
>
> - [\_\_\_\_atomic_clear_bit](https://biscuitos.github.io/blog/BITMAP_____atomic_clear_bit)
>
> - [\_\_\_\_atomic_set_bit](https://biscuitos.github.io/blog/BITMAP_____atomic_set_bit)
>
> - [\_\_\_\_atomic_test_and_change_bit](https://biscuitos.github.io/blog/BITMAP_____atomic_test_and_change_bit)
>
> - [\_\_\_\_atomic_test_and_clear_bit](https://biscuitos.github.io/blog/BITMAP_____atomic_test_and_clear_bit)
>
> - [\_\_\_\_atomic_test_and_set_bit](https://biscuitos.github.io/blog/BITMAP_____atomic_test_and_set_bit)
>
> - [BIT](https://biscuitos.github.io/blog/BITMAP_BIT)
>
> - [BIT_MASK](https://biscuitos.github.io/blog/BITMAP_BIT_MASK)
>
> - [BIT_ULL](https://biscuitos.github.io/blog/BITMAP_BIT_ULL)
>
> - [BIT_ULL_MASK](https://biscuitos.github.io/blog/BITMAP_BIT_ULL_MASK)
>
> - [BIT_ULL_WORD](https://biscuitos.github.io/blog/BITMAP_BIT_ULL_WORD)
>
> - [BIT_WORD](https://biscuitos.github.io/blog/BITMAP_BIT_WORD)
>
> - [BITS_PER_BYTE](https://biscuitos.github.io/blog/BITMAP_BITS_PER_BYTE)
>
> - [BITS_PER_LONG](https://biscuitos.github.io/blog/BITMAP_BITS_PER_LONG)
>
> - [BITS_PER_LONG_LONG](https://biscuitos.github.io/blog/BITMAP_BITS_PER_LONG_LONG)
>
> - [\_\_bitmap_and](https://biscuitos.github.io/blog/BITMAP___bitmap_and)
>
> - [bitmap_and](https://biscuitos.github.io/blog/BITMAP_bitmap_and)
>
> - [\_\_bitmap_andnot](https://biscuitos.github.io/blog/BITMAP___bitmap_andnot)
>
> - [bitmap_andnot](https://biscuitos.github.io/blog/BITMAP_bitmap_andnot)
>
> - [\_\_bitmap_clear](https://biscuitos.github.io/blog/BITMAP___bitmap_clear)
>
> - [bitmap_clear](https://biscuitos.github.io/blog/BITMAP_bitmap_clear)
>
> - [bitmap_copy](https://biscuitos.github.io/blog/BITMAP_bitmap_copy)
>
> - [bitmap_copy_clear_tail](https://biscuitos.github.io/blog/BITMAP_bitmap_copy_clear_tail)
>
> - [\_\_bitmap_complement](https://biscuitos.github.io/blog/BITMAP___bitmap_complement)
>
> - [bitmap_complement](https://biscuitos.github.io/blog/BITMAP_bitmap_complement)
>
> - [\_\_bitmap_equal](https://biscuitos.github.io/blog/BITMAP___bitmap_equal)
>
> - [bitmap_empty](https://biscuitos.github.io/blog/BITMAP_bitmap_empty)
>
> - [bitmap_equal](https://biscuitos.github.io/blog/BITMAP_bitmap_equal)
>
> - [bitmap_fill](https://biscuitos.github.io/blog/BITMAP_bitmap_fill)
>
> - [bitmap_find_next_zero_area_off](https://biscuitos.github.io/blog/BITMAP_bitmap_find_next_zero_area_off)
>
> - [BITMAP_FIRST_WORD_MASK](https://biscuitos.github.io/blog/BITMAP_BITMAP_FIRST_WORD_MASK)
>
> - [bitmap_from_arr32](https://biscuitos.github.io/blog/BITMAP_bitmap_from_arr32)
>
> - [bitmap_from_u64](https://biscuitos.github.io/blog/BITMAP_bitmap_from_u64)
>
> - [bitmap_full](https://biscuitos.github.io/blog/BITMAP_bitmap_full)
>
> - [\_\_bitmap_intersects](https://biscuitos.github.io/blog/BITMAP___bitmap_intersects)
>
> - [bitmap_intersects](https://biscuitos.github.io/blog/BITMAP_bitmap_intersects)
>
> - [BITMAP_LAST_WORD_MASK](https://biscuitos.github.io/blog/BITMAP_BITMAP_LAST_WORD_MASK)
>
> - [\_\_bitmap_or](https://biscuitos.github.io/blog/BITMAP___bitmap_or)
>
> - [bitmap_or](https://biscuitos.github.io/blog/BITMAP_bitmap_or)
>
> - [\_\_bitmap_parse](https://biscuitos.github.io/blog/BITMAP___bitmap_parse)
>
> - [bitmap_parse](https://biscuitos.github.io/blog/BITMAP_bitmap_parse)
>
> - [bitmap_pos_to_ord](https://biscuitos.github.io/blog/BITMAP_bitmap_pos_to_ord)
>
> - [bitmap_print_to_pagebuf](https://biscuitos.github.io/blog/BITMAP_bitmap_print_to_pagebuf)
>
> - [\_\_bitmap_set](https://biscuitos.github.io/blog/BITMAP___bitmap_set)
>
> - [bitmap_set](https://biscuitos.github.io/blog/BITMAP_bitmap_set)
>
> - [\_\_bitmap_shift_left](https://biscuitos.github.io/blog/BITMAP___bitmap_shift_left)
>
> - [bitmap_shift_left](https://biscuitos.github.io/blog/BITMAP_bitmap_shift_left)
>
> - [\_\_bitmap_shift_right](https://biscuitos.github.io/blog/BITMAP___bitmap_shift_right)
>
> - [bitmap_shift_right](https://biscuitos.github.io/blog/BITMAP_bitmap_shift_right)
>
> - [\_\_bitmap_subset](https://biscuitos.github.io/blog/BITMAP___bitmap_subset)
>
> - [bitmap_subset](https://biscuitos.github.io/blog/BITMAP_bitmap_subset)
>
> - [bitmap_to_arr32](https://biscuitos.github.io/blog/BITMAP_bitmap_to_arr32)
>
> - [\_\_bitmap_weight](https://biscuitos.github.io/blog/BITMAP___bitmap_weight)
>
> - [bitmap_weight](https://biscuitos.github.io/blog/BITMAP_bitmap_weight)
>
> - [\_\_bitmap_xor](https://biscuitos.github.io/blog/BITMAP___bitmap_xor)
>
> - [bitmap_xor](https://biscuitos.github.io/blog/BITMAP_bitmap_xor)
>
> - [bitmap_zero](https://biscuitos.github.io/blog/BITMAP_bitmap_zero)
>
> - [BITS_PER_TYPE](https://biscuitos.github.io/blog/BITMAP_BITS_PER_TYPE)
>
> - [BITS_TO_LONGS](https://biscuitos.github.io/blog/BITMAP_BITS_TO_LONGS)
>
> - [\_\_change_bit](https://biscuitos.github.io/blog/BITMAP___change_bit)
>
> - [\_\_change_bit](https://biscuitos.github.io/blog/BITMAP___change_bit)
>
> - [clear_bit](https://biscuitos.github.io/blog/BITMAP_clear_bit)
>
> - [clear_bit](https://biscuitos.github.io/blog/BITMAP_clear_bit)
>
> - [DECLARE_BITMAP](https://biscuitos.github.io/blog/BITMAP_DECLARE_BITMAP)
>
> - [GENMASK](https://biscuitos.github.io/blog/BITMAP_GENMASK)
>
> - [GENMASK_ULL](https://biscuitos.github.io/blog/BITMAP_GENMASK_ULL)
>
> - [\_\_ffs](https://biscuitos.github.io/blog/BITMAP___ffs)
>
> - [ffs](https://biscuitos.github.io/blog/BITMAP_ffs)
>
> - [ffz](https://biscuitos.github.io/blog/BITMAP_ffz)
>
> - [find_first_bit](https://biscuitos.github.io/blog/BITMAP_find_first_bit)
>
> - [find_first_zero_bit](https://biscuitos.github.io/blog/BITMAP_find_first_zero_bit)
>
> - [find_last_bit](https://biscuitos.github.io/blog/BITMAP_find_last_bit)
>
> - [\_find_next_bit](https://biscuitos.github.io/blog/BITMAP_SC/#_find_next_bit)
>
> - [find_next_and_bit](https://biscuitos.github.io/blog/BITMAP_find_next_and_bit)
>
> - [find_next_bit](https://biscuitos.github.io/blog/BITMAP_find_next_bit)
>
> - [find_next_zero_bit](https://biscuitos.github.io/blog/BITMAP_find_next_zero_bit)
>
> - [\_\_fls](https://biscuitos.github.io/blog/BITMAP___fls)
>
> - [fls](https://biscuitos.github.io/blog/BITMAP_fls)
>
> - [for_each_clear_bit_from](https://biscuitos.github.io/blog/BITMAP_for_each_clear_bit_from)
>
> - [for_each_clear_bit](https://biscuitos.github.io/blog/BITMAP_for_each_clear_bit)
>
> - [for_each_set_bit](https://biscuitos.github.io/blog/BITMAP_for_each_set_bit)
>
> - [for_each_set_bit_from](https://biscuitos.github.io/blog/BITMAP_for_each_set_bit_from)
>
> - [rol8](https://biscuitos.github.io/blog/BITMAP_rol8)
>
> - [rol16](https://biscuitos.github.io/blog/BITMAP_rol16)
>
> - [rol32](https://biscuitos.github.io/blog/BITMAP_rol32)
>
> - [ror8](https://biscuitos.github.io/blog/BITMAP_ror8)
>
> - [ror16](https://biscuitos.github.io/blog/BITMAP_ror16)
>
> - [ror32](https://biscuitos.github.io/blog/BITMAP_ror32)
>
> - [\_\_set_bit](https://biscuitos.github.io/blog/BITMAP___set_bit)
>
> - [set_bit](https://biscuitos.github.io/blog/BITMAP_set_bit)
>
> - [\_\_test_and_change_bit](https://biscuitos.github.io/blog/BITMAP___test_and_change_bit)
>
> - [test_and_change_bit](https://biscuitos.github.io/blog/BITMAP_test_and_change_bit)
>
> - [\_\_test_and_clear_bit](https://biscuitos.github.io/blog/BITMAP___test_and_clear_bit)
>
> - [test_and_clear_bit](https://biscuitos.github.io/blog/BITMAP_test_and_clear_bit)
>
> - [\_\_test_and_set_bit](https://biscuitos.github.io/blog/BITMAP___test_and_set_bit)
>
> - [test_and_set_bit](https://biscuitos.github.io/blog/BITMAP_test_and_set_bit)
>
> - [test_bit](https://biscuitos.github.io/blog/BITMAP_test_bit)

-----------------------------------------------

# <span id="é™„å½•">é™„å½•</span>

> [BiscuitOS Home](https://biscuitos.github.io/)
>
> [BiscuitOS Driver](https://biscuitos.github.io/blog/BiscuitOS_Catalogue/)
>
> [BiscuitOS Kernel Build](https://biscuitos.github.io/blog/Kernel_Build/)
>
> [Linux Kernel](https://www.kernel.org/)
>
> [Bootlin: Elixir Cross Referencer](https://elixir.bootlin.com/linux/latest/source)
>
> [æ­å»ºé«˜æ•ˆçš„ Linux å¼€å‘ç¯å¢ƒ](https://biscuitos.github.io/blog/Linux-debug-tools/)

## èµèµä¸€ä¸‹å§ ğŸ™‚

![MMU](https://gitee.com/BiscuitOS_team/PictureSet/raw/Gitee/BiscuitOS/kernel/HAB000036.jpg)
