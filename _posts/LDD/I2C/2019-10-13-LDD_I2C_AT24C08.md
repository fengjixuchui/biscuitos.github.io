---
layout: post
title:  "AT24C08"
date:   2019-10-13 13:17:30 +0800
categories: [HW]
excerpt: I2C AT24CXX.
tags:
  - LDD
---

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/BiscuitOS/kernel/IND00000I.jpg)

> Email: BuddyZhang1 <buddy.zhang@aliyun.com>

## ç›®å½•

> - [AT24C08 ç®€ä»‹](#A00)
>
> - [å®è·µå‡†å¤‡](#A010)
>
> - [AT24C08 é©±åŠ¨](#A011)
>
>   - [AT24C08 é©±åŠ¨åˆ†æ](#B00)
>
>   - [AT24C08 BiscuitOS-RaspberryPi ä¸­ä½¿ç”¨](#B01)
>
>   - [AT24C08 å·¥ç¨‹å®è·µéƒ¨ç½²](#B02)
>
> - [AT24C08 å·¥å…·](#A012)
>
> - [AT24C08 åº”ç”¨ç¨‹åº](#A013)
>
>   - [AT24C08 æºç åˆ†æ](#B03)
>
>   - [AT24C08 BiscuitOS-RaspberryPi ä¸­ä½¿ç”¨](#B04)
>
>   - [AT24C08 å·¥ç¨‹å®è·µéƒ¨ç½²](#B05)
>
> - [AT24C08 ç¡¬ä»¶æµ‹è¯•](#A014)
>
>   - [AT24C08 è¯»å†™æµ‹è¯•](#B05)
>
>   - [AT24C08 å‹åŠ›æµ‹è¯•](#B06)
>
>   - [AT24C08 æ³¢å½¢åˆ†æ](#B07)
>
> - [AT24C08 è½¯ä»¶æµ‹è¯•](#A015)
>
>   - [AT24C08 è¯»å†™æµ‹è¯•](#B08)
>
>   - [AT24C08 å‹åŠ›æµ‹è¯•](#B09)
>
> - [AT24C08 åº”ç”¨](#A016)
>
> - [AT24C08 é—®é¢˜åˆé›†](#B10)
>
> - [é™„å½•](#A017)

------------------------------------------

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/BiscuitOS/kernel/IND00000A.jpg)

## <span id="A00">AT24C08 ç®€ä»‹</span>

AT24C08 æ˜¯ä¸€ä¸ªæä¾› 8192 bits çš„ä¸²è¡Œå¯æ“¦é™¤å’Œç¼–ç¨‹çš„åªè¯»å†…å­˜ (EEPROM),
å…¶åŒ…å«äº† 1024 ä¸ª 8 bit çš„å­—èŠ‚ã€‚AT24C08 é’ˆå¯¹è®¸å¤šå·¥ä¸šå’Œå•†ä¸šåº”ç”¨è¿›è¡Œäº†
ä¼˜åŒ–ï¼Œåœ¨è¿™äº›åº”ç”¨ä¸­ï¼Œä½åŠŸè€—å’Œä½ç”µå‹çš„ç‰¹å®šæ˜¾å¾—ç‰¹åˆ«çªå‡ºã€‚AT24C08 æä¾›èŠ‚çœ
ç©ºé—´çš„ 8-lead PDIPï¼Œ8-lead JEDEC SOICï¼Œ8-ball dBGA2, 8-leap MAP,
8-lead TSSOP, ä»¥åŠ 5-lead SOT23 å°è£…ã€‚AT24C08 æä¾›äº†æ ‡å‡†çš„ I2C æ¥å£ï¼Œ
å¯ä»¥é€šè¿‡ä¸¤çº¿çš„ I2C æ€»çº¿è®¿é—® AT24C08. AT24C08 æä¾›äº† 2.7V-5.5V çš„ç‰ˆæœ¬ï¼Œ
ä»¥åŠ 1.8V è‡³ 5.5V ç‰ˆæœ¬ã€‚AT24C08 Datasheet é“¾æ¥å¦‚ä¸‹ï¼š

> [AT24C08 Datasheet](https://github.com/BiscuitOS/Documentation/blob/master/Datasheet/I2C/AT24C08.pdf)

å¸‚é¢ä¸Šä¹Ÿæä¾›äº†å¾ˆè¿‡é’ˆå¯¹ AT24C08 çš„æ¨¡å—è®¾è®¡ï¼Œä¾‹å¦‚ä¸‹å›¾ï¼š

------------------------------------------

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/BiscuitOS/kernel/IND00000H.jpg)

## <span id="A10">å®è·µå‡†å¤‡</span>

BiscuitOS å·²ç»æ”¯æŒ AT24C08 çš„ç¡¬ä»¶å®è·µï¼Œä½†åœ¨å®è·µå‰éœ€è¦ä½œç›¸åº”çš„å‡†å¤‡ï¼Œ
å¿…é¡»è¦çš„å‡†å¤‡æœ‰ï¼š

RaspberryPi 4B å¼€å‘æ¿ä¸€å—

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/RPI/RPI000016.png)

AT24C08 æ¨¡å—æ¿ä¸€å—ï¼š

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/RPI/RPI000017.jpg)

åŸºäº Linux 5.0 å†…æ ¸çš„ RaspberryPi 4B å¼€å‘ç¯å¢ƒï¼Œè¯·å‚è€ƒå¦‚ä¸‹æ–‡æ¡£
è¿›è¡Œæ­å»ºï¼š

> - [BiscuitOS RaspberryPi 4B ç¯å¢ƒéƒ¨ç½²]()

ç¤ºæ³¢å™¨ä»¥åŠé€»è¾‘åˆ†æä»ªä¸ºå¯é€‰å·¥å…·ï¼Œå¼€å‘è€…æ ¹æ®è‡ªèº«æƒ…å†µå‡†å¤‡ã€‚
æœ¬æ–‡ä½¿ç”¨ DSLogic é€»è¾‘åˆ†æä»ªå’Œ DSCope æ•°å­—ç¤ºæ³¢å™¨è¿›è¡Œæ•°æ®
åˆ†æå’Œæ³¢å½¢æŠ“å–ã€‚

DSLogic é€»è¾‘åˆ†æä»ªï¼š

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/RPI/RPI000012.png)

DSLogic é€»è¾‘åˆ†æä»ªæ•°æ®å·¥å…·ï¼š

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/RPI/RPI000006.png)

DSCope æ•°å­—ç¤ºæ³¢å™¨ï¼š

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/RPI/RPI000013.png)

DSCope æ•°å­—ç¤ºæ³¢å™¨æ•°æ®å·¥å…·ï¼š

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/RPI/RPI000006.png)

------------------------------------------

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/BiscuitOS/kernel/IND00000E.jpg)

## <span id="B10">AT24C08 é—®é¢˜åˆé›†</span>

> - [I2C æ€»çº¿æ— æ³•æ‰¾åˆ° AT24C08](#C00)

----------------------------------------------

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/BiscuitOS/kernel/IND00000K.jpg)

## <span id="C00">I2C æ€»çº¿æ— æ³•æ‰¾åˆ° AT24C08</span>

å°† AT24C08 è¿æ¥åˆ° RPI-4B çš„ I2C-1 æ€»çº¿ä¸Šï¼Œå…·ä½“è¿æ¥å¦‚ä¸‹å›¾ï¼ŒAT24C08
æ¨¡å— VCC è¿æ¥åˆ° RPI-4B 1 å·è„š VCCï¼›GND è¿æ¥åˆ° RPI-4B 9 å·è„šï¼›SDL è¿æ¥åˆ°
RPI-4B 5 å·è„šï¼›SDA è¿æ¥åˆ° RPI-4B 3 å·è„šã€‚

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/RPI/RPI000008.png)

æ¥ç€åœ¨ RPI-4B ä¸Šï¼ŒI2C æ€»çº¿æ³¨å†Œä½¿ç”¨çš„æ˜¯ /dev/i2c-1, æ­¤æ—¶ä½¿ç”¨ BiscuitOS
ç³»ç»Ÿä¸Šè‡ªå¸¦çš„å·¥å…· i2cdetect å¯¹ I2C-1 æ€»çº¿è¿›è¡Œ detect æ“ä½œï¼Œè¿è¡Œ
ç»“æœå¦‚ä¸‹ï¼š

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/RPI/RPI000009.png)

ä»ç»“æœå¯ä»¥çœ‹å‡º i2cdetect å·¥å…·å¹¶æœªåœ¨ I2C-1 æ€»çº¿ä¸Šæ‰¾åˆ°ä»»ä½•ä»è®¾å¤‡ã€‚
æ¥ç€ä½¿ç”¨æµ‹è¯•ç¨‹åºå¯¹ AT24C08 è¿›è¡Œè¯»æ“ä½œï¼Œæµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š

> - [æµ‹è¯•ä»£ç  Github ä½ç½®](https://github.com/BiscuitOS/HardStack/tree/master/Device-Driver/i2c/Error/Detect/userland)

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/RPI/RPI000010.png)

åŸºäºä¸Šé¢çš„ä»£ç ï¼Œä½¿ç”¨ DSCope ç¤ºæ³¢å™¨å¯¹ SDL å’Œ SDA ä¿¡å·è¿›è¡ŒæŠ“å–ï¼Œæ›´å¤š
DSCope çš„ä½¿ç”¨è¯·å‚é˜…ä¸‹é¢æ–‡æ¡£ï¼š

> - [DSCope ç”¨æˆ·æ‰‹å†Œ]()

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/RPI/RPI000013.jpg)

åœ¨æŠ“å–æ³¢å½¢ä¹‹å‰ï¼Œå…ˆåˆ†æä¸€ä¸‹ AT24C08 I2C è¯»æ“ä½œçš„ä¿¡å·å®šä¹‰ï¼ŒAT24C08 æ•°æ®æ‰‹å†Œ
è¯·å‚é˜…ï¼š

> - [AT24C08 EEPROM](https://github.com/BiscuitOS/Documentation/blob/master/Datasheet/I2C/AT24C08.pdf)

å…¶ä¸­å¯¹åº”è¯»æ“ä½œï¼Œä»£ç ä¸­ä½¿ç”¨çš„æ˜¯ AT24C98 çš„ Random Readï¼Œå…¶ä¿¡å·å®šä¹‰å¦‚ä¸‹ï¼š

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/RPI/RPI000014.png)

åœ¨ AT24C08 çš„ Random Read ä¿¡å·ä¸­ï¼Œé¦–å…ˆæ˜¯ START ä¿¡å·ï¼Œè¯¥ä¿¡å·æ˜¯ SDA é¦–å…ˆäº§ç”Ÿ
ä¸€ä¸ªä¸‹é™æ²¿ï¼Œå¦‚æœæ­¤æ—¶ SCL ä»»å¤„äºé«˜ç”µå¹³ï¼Œé‚£ä¹ˆ I2C è®¤ä¸ºå…¶ä¸º START ä¿¡å·ã€‚å¦‚ä¸‹å›¾ï¼š

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/RPI/RPI000015.png)

START ä¿¡å·ä¹‹åï¼ŒI2C Master ä¼ é€’ 7 bit çš„ Slave åœ°å€ï¼ŒSlave åœ°å€é¦–å…ˆä¼  MSB
éƒ¨åˆ†ï¼Œå³ Slave åœ°å€çš„é«˜å­—èŠ‚ï¼Œç„¶åä¼ ä½å­—èŠ‚ã€‚ä¼ é€’å®Œæ¯•ä¹‹åæ˜¯ W/R æ ‡å¿—ä½ï¼Œæ­¤æ—¶
W/R bit ä½ä¸ºä½ç”µå¹³ï¼ŒW/R ä½ä¸ºä½ä»£è¡¨å†™æ“ä½œã€‚W/R ä¿¡å·ä¹‹åæ˜¯ ACK ä¿¡å·ï¼Œæ­¤æ—¶å¦‚
æœæŒ‡å®šçš„ Slave è®¾å¤‡æ²¡æœ‰åº”ç­”ï¼Œé‚£ä¹ˆ ACK å°†ä¼šæ˜¯é«˜ç”µå¹³ï¼Œæ­¤æ—¶ Master ä¼šé‡ä¼ ä¸€æ¬¡
æŒ‡å®š Slave è®¾å¤‡çš„åœ°å€ï¼Œå¦‚æœ Slave è®¾å¤‡è¿˜æ˜¯æ²¡æœ‰åº”ç­”ï¼Œé‚£ä¹ˆ Master å°±å‘å‡ºä¸€ä¸ª
STOP ä¿¡å·ï¼›å¦‚æœæŒ‡å®šçš„ Slave è®¾å¤‡åº”ç­”ï¼Œé‚£ä¹ˆ ACK ä¿¡å·ä¼šå°† SDA æ‹‰ä½ã€‚ACK ä¿¡å·
ä¹‹åæ˜¯ 8 bit çš„è¯»åœ°å€ï¼Œå³éœ€è¦åœ¨ AT24C08 ä¸Šè¯»å–æ•°æ®çš„åœ°å€ï¼Œå…¶ä¹Ÿæ˜¯å…ˆä¼  MSB
åˆ° LSB çš„ä¼ ä¿¡å·ã€‚è‡³æ­¤ï¼Œä¹‹å‰ä¼ è¾“çš„ä¿¡å·ç§°ä¸º "DUMMY WRITE"ï¼Œå› ä¸ºåœ¨è¿™æ®µä¿¡å·ä¸­ï¼Œ
W/R ä¿¡å·ä¸ºä½ï¼Œä»£è¡¨ä¸€æ¬¡å†™ï¼Œä½†åˆä¸æ˜¯ I2C å†™æ“ä½œï¼Œå› æ­¤ç§°ä¸ºå‡çš„å†™æ“ä½œã€‚æ¥ä¸‹æ¥
Master ç»§ç»­äº§ç”Ÿä¸€ä¸ª START ä¿¡å·ï¼Œå¹¶å†æ¬¡æŒ‰ MSB åˆ° LSB çš„æ–¹å¼ä¼ è¾“ä»è®¾å¤‡çš„åœ°å€ã€‚
æ¥ä¸‹æ¥ä¼ é€’ä¸€ä¸ª READ ä¿¡å·ï¼Œä¸ºé«˜ç”µå¹³ï¼Œä»£è¡¨çœŸæ­£çš„è¯»æ“ä½œï¼Œæ­¤æ—¶å¦‚æœ Slave è®¾å¤‡å‡†å¤‡
å¥½æ•°æ®ï¼Œé‚£ä¹ˆ Slave è®¾å¤‡å°±ä¼šå°† SDA æ€»çº¿æ‹‰ä½ï¼Œä»¥æ­¤ç”Ÿæˆä¸€ä¸ª ACK ä¿¡å·ï¼Œæ¥ç€
Slave è®¾å¤‡å°†æ•°æ®å†™å…¥åˆ° SDA ä¿¡å·çº¿ä¸Šï¼›å¦‚æœæ­¤æ—¶ Slave è®¾å¤‡æ²¡æœ‰åº”ç­”ï¼Œé‚£ä¹ˆ Master
ä¼šé‡ä¼  Slave åœ°å€åˆ° SDA ä¿¡å·çº¿ä¸Šã€‚åœ¨ Slave è®¾å¤‡ä¼ è¾“å®Œæ•°æ®ä¹‹åï¼Œå¦‚æœ
æ²¡æœ‰å…¶ä»–æ“ä½œï¼Œé‚£ä¹ˆåˆ°ç¬¬ 9 ä¸ªå‘¨æœŸ Slave å°†ä¸ä¼šäº§ç”Ÿ ACK ä¿¡å·ï¼ŒSDA ä¿¡å·çº¿å˜é«˜ï¼Œ
æ­¤æ—¶å¦‚æœ Master æ— å…¶ä»–æ“ä½œï¼Œé‚£ä¹ˆ Master å°†ä¼šäº§ç”Ÿä¸€ä¸ª STOP ä¿¡å·ã€‚è‡³æ­¤ï¼Œä¸€æ¬¡
I2C çš„ Random Read æ“ä½œå®Œæˆã€‚

#### æ—  Slave è®¾å¤‡ I2C Read æ“ä½œ

é¦–å…ˆåœ¨ I2C æ€»çº¿ä¸Šä¸æŒ‚è½½ä»»ä½•ä»è®¾å¤‡çš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œ I2C çš„ Random Read æ“ä½œã€‚
æ­å»ºå¥½æµ‹è¯•ç¯å¢ƒä¹‹åï¼Œè¿è¡Œ DSView ç¨‹åºã€‚ç‚¹å‡»è§¦å‘æŒ‰é’®ï¼Œå°†å³ä¾§ "è§¦å‘ä½ç½®" è°ƒæ•´
ä¸º 10%ï¼Œä»¥ä¾¿èƒ½ä» I2C èµ·å§‹ä¿¡å·å¤„å¼€å§‹æŠ“å–æ³¢å½¢ï¼›æ­¤æ—¶é€šé“ 0 è¿æ¥ SDA ä¿¡å·çº¿ï¼Œæ ¹æ®
I2C ä¿¡å·å¯çŸ¥ï¼Œå½“ SDA äº§ç”Ÿä¸€ä¸ªä¸‹é™æ²¿ä¹‹åï¼ŒSCL æ¥ç€ä¹Ÿäº§ç”Ÿä¸€ä¸ªä¸‹é™æ²¿ï¼Œé‚£ä¹ˆè®¤ä¸º
æ˜¯ I2C å¼€å§‹ä¼ è¾“ä¿¡å·ï¼Œå› æ­¤å°† SDA çš„ä¸‹é™æ²¿ä½œä¸ºè§¦å‘ä¿¡å·ã€‚è®¾ç½®å¥½ä¹‹åç‚¹å‡» "å•æ¬¡"
æŒ‰é’®ï¼Œå¯¹ä¿¡å·è¿›è¡Œæ•æ‰ã€‚ä½¿ç”¨ä¸Šé¢çš„æµ‹è¯•ç¨‹åºï¼Œå¯¹ 0x50 çš„ 0x00 åœ°å€è¯»å– 1 ä¸ªå­—èŠ‚
çš„æ“ä½œï¼š

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/RPI/RPI000006.png)

ä»æ•è·çš„æ³¢å½¢å¯ä»¥çœ‹å‡ºï¼Œç»¿è‰²ä¸º SCL ä¿¡å·ï¼Œé»„è‰²ä¸º SDA ä¿¡å·ã€‚åœ¨å‰ 8 ä¸ªå‘¨æœŸä¸­ï¼Œ
ä»è®¾å¤‡åœ°å€ä¸º 0x50ï¼ŒR/W ä¸º 0ï¼ŒACK æ²¡æœ‰åº”ç­”ï¼Œå› æ­¤ Master åœ¨é‡å‘ä¸€æ¬¡ï¼Œæ­¤æ—¶
ACK è¿˜æ˜¯æ²¡æœ‰åº”ç­”ï¼Œäºæ˜¯ Master å‘é€ä¸€ä¸ª STOP ä¿¡å·ã€‚æ­¤æ¬¡æ“ä½œé¢„è®¡ç»“æœç¬¦åˆé¢„æœŸã€‚

#### æŒ‚è½½ AT24C08 I2C Read æ“ä½œ

é¦–å…ˆå°† AT24C08 è¿æ¥åˆ° RPI-4B ä¸Šï¼Œè¿›è¡Œ I2C çš„ Random Read æ“ä½œã€‚
æ­å»ºå¥½æµ‹è¯•ç¯å¢ƒä¹‹åï¼Œè¿è¡Œ DSView ç¨‹åºã€‚ç‚¹å‡»è§¦å‘æŒ‰é’®ï¼Œå°†å³ä¾§ "è§¦å‘ä½ç½®" è°ƒæ•´
ä¸º 10%ï¼Œä»¥ä¾¿èƒ½ä» I2C èµ·å§‹ä¿¡å·å¤„å¼€å§‹æŠ“å–æ³¢å½¢ï¼›æ­¤æ—¶é€šé“ 0 è¿æ¥ SDA ä¿¡å·çº¿ï¼Œæ ¹æ®
I2C ä¿¡å·å¯çŸ¥ï¼Œå½“ SDA äº§ç”Ÿä¸€ä¸ªä¸‹é™æ²¿ä¹‹åï¼ŒSCL æ¥ç€ä¹Ÿäº§ç”Ÿä¸€ä¸ªä¸‹é™æ²¿ï¼Œé‚£ä¹ˆè®¤ä¸º
æ˜¯ I2C å¼€å§‹ä¼ è¾“ä¿¡å·ï¼Œå› æ­¤å°† SDA çš„ä¸‹é™æ²¿ä½œä¸ºè§¦å‘ä¿¡å·ã€‚è®¾ç½®å¥½ä¹‹åç‚¹å‡» "å•æ¬¡"
æŒ‰é’®ï¼Œå¯¹ä¿¡å·è¿›è¡Œæ•æ‰ã€‚ä½¿ç”¨ä¸Šé¢çš„æµ‹è¯•ç¨‹åºï¼Œå¯¹ 0x50 çš„ 0x00 åœ°å€è¯»å– 1 ä¸ªå­—èŠ‚
çš„æ“ä½œï¼š

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/RPI/RPI000007.png)

ä»æ•è·çš„æ³¢å½¢å¯ä»¥çœ‹å‡ºï¼Œç»¿è‰²ä¸º SCL ä¿¡å·ï¼Œé»„è‰²ä¸º SDA ä¿¡å·ã€‚åœ¨å‰ 8 ä¸ªå‘¨æœŸä¸­ï¼Œ
ä»è®¾å¤‡åœ°å€ä¸º 0x50ï¼ŒR/W ä¸º 0ï¼ŒACK æ²¡æœ‰åº”ç­”ï¼Œå› æ­¤ Master é‡ä¼ äº†ä¸€æ¬¡ï¼Œåˆ°äº†
ç¬¬ 9 ä¸ªå‘¨æœŸè¿˜æ˜¯æ²¡æœ‰åº”ç­”ã€‚å› æ­¤å‘ç°é—®é¢˜ Slave è®¾å¤‡æ— æ³•è¯†åˆ«ã€‚

#### é—®é¢˜æ’é™¤

é¦–å…ˆä½¿ç”¨ç”µå‹è¡¨æµ‹é‡ AT24C08 çš„ç”µå‹ï¼ŒVCC ä¸º 3.2Vï¼ŒSDA ä¸ SCL å‡ä¸º 3.1Vï¼š
åœ¨è¿™å¬å–ç¤¾åŒºæœ‹å‹çš„å»ºè®®ï¼Œå¯¹ RPI 4B I2C çš„é¢‘ç‡è¿›è¡Œä¿®æ”¹ï¼Œåˆ†åˆ«æµ‹è¯•äº† 400K, 100K,
50K, ä»¥åŠ 10Kï¼Œéƒ½æ— æ³•æ‰¾åˆ° I2C ä»è®¾å¤‡ã€‚
æ¥ç€æŸ¥çœ‹ BCM2835 å…³äº I2C æ§åˆ¶å™¨çš„æ–‡æ¡£ï¼Œä»¥åŠå¯¹åº”çš„çš„é©±åŠ¨ç¨‹åºï¼Œåœ¨å…¶ä¸­å‘ç°ä¸€ä¸ª
åä¸º "Clock Stretching" çš„é—®é¢˜ï¼Œå³ç”±äºä¸»æ§åœ¨ I2C æ€»çº¿ä¸Šå‘ä»è®¾å¤‡å‘é€æ•°æ®ä¹‹åï¼Œ
ä»è®¾å¤‡å›åº”æ—¶é—´è¶…è¿‡äº† Master ç­‰å¾…æ—¶é—´ï¼Œè¿™ç§°ä¸ºæ—¶é’Ÿæ‹‰å‡é—®é¢˜ã€‚ä¸‹é¢æ˜¯å¯¹è¯¥é—®é¢˜çš„è®¨è®ºï¼š

> - [Raspberry Pi I2C clock-stretching bug](http://www.advamation.com/knowhow/raspberrypi/rpi-i2c-bug.html)
>
> - [I2C clock stretching](https://www.raspberrypi.org/forums/viewtopic.php?p=146272)

é€šè¿‡ä¸Šé¢çš„æ–‡æ¡£ï¼Œä¹Ÿå‘ç°äº†æŒ‚è½½ AT24C08 çš„æ—¶å€™ï¼Œä¹Ÿå‡ºç°äº†å‘¨æœŸæ‹‰å‡é—®é¢˜ï¼Œå¦‚ä¸‹å›¾ï¼š

![](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/RPI/RPI000007.png)

å› æ­¤ç¡®å®šé—®é¢˜å°±æ˜¯ Master æ­£å¸¸å‘é€æ³¢å½¢ï¼Œåªæ˜¯ Slave æ²¡æœ‰æˆ–è€…æ²¡æœ‰åŠæ—¶åº”ç­”ï¼Œ
å› æ­¤ç»§ç»­æŸ¥æ‰¾æ ¹æœ¬åŸå› ã€‚äºæ˜¯æˆ‘æ‰¾äº†ä¸€ä¸ªé«˜é€Ÿçš„ I2C è®¾å¤‡ "LM75A" é«˜ç²¾åº¦æ¸©åº¦
ä¼ æ„Ÿå™¨ã€‚ä½¿ç”¨åŒæ ·çš„å®‰è£…åŠæ³•ï¼Œç»“æœè¿˜æ˜¯åŒæ ·çš„é—®é¢˜ï¼ŒRPI 4B æ— æ³•æ‰¾åˆ° Slave
è®¾å¤‡ã€‚

ç¤¾åŒºæœ‹å‹å»ºè®®åœ¨ AT24C08 èŠ¯ç‰‡å¼•è„šä¸Šç¡®è®¤æ˜¯å¦æœ‰ SDA å’Œ SCL ä¿¡å·ä¼ è¾“è¿‡æ¥ï¼Œ
ç»“æœé€šè¿‡ç¤ºæ³¢å™¨å‘ç° SCL ä¿¡å·å¹¶æœªæ¥æ”¶åˆ°ï¼Œäºæ˜¯æ’æŸ¥é“¾æ¥é—®é¢˜ã€‚æœ€åå‘ç°è¿æ¥
AT24C08 çš„æœé‚¦çº¿å¤´å¤„å‡ºç°æ¾åŠ¨ï¼Œå¯¼è‡´è™šæ¥ã€‚å°†çº¿è¿æ¥å¥½åï¼ŒRPI 4B å¯ä»¥æ­£å¸¸
æ‰¾åˆ° Slave è®¾å¤‡ã€‚

#### é—®é¢˜æ€»ç»“

ä¸ºäº†å¤„ç†è¿™ä¸ªé—®é¢˜ï¼ŒèŠ±è´¹äº†å¾ˆå¤šæ—¶é—´æŸ¥æ‰¾å„æ–¹é¢çš„åŸå› ï¼Œé€šè¿‡ä¸æ–­çš„æŸ¥æ‰¾ï¼Œç¦»çœŸç›¸è¶Šæ¥
è¶Šè¿‘ã€‚æœ€åå‘ç°é—®é¢˜æ˜¯å› ä¸ºæœé‚¦çº¿è¿æ¥é—®é¢˜ï¼Œè¿™é‡Œæ›¾ç»æ˜¯è‡ªå·±æ²¡æœ‰å®é™…æµ‹é‡ä½†è®¤ä¸º
æ²¡æœ‰é—®é¢˜çš„åœ°æ–¹ï¼Œæœ€åè¿™é‡Œæˆä¸ºé—®é¢˜çš„æ ¹æœ¬åŸå› ã€‚é€šè¿‡è¿™æ¬¡é—®é¢˜çš„è§£å†³ï¼Œè™½ç„¶ç»•äº†
ä¸€å¤§åœˆï¼Œä½†å¯¹ I2C çš„å¤šä¸ªæ–¹é¢ä¹Ÿæœ‰äº†æ›´å¤šçš„ç†è§£ï¼Œæ¯”å¦‚ I2C æ§åˆ¶å™¨ï¼ŒI2C å¹³å°æ€»çº¿ï¼Œ
I2C è®¾å¤‡æ–¹é¢ã€‚ä½†æœ€ç»ˆé—®é¢˜è¿˜æ˜¯ç”±äºè‡ªå·±å¯¹ç¡¬ä»¶è¿çº¿å¤„ç†ä¸å¤Ÿè°¨æ…å¼•èµ·çš„ã€‚

-----------------------------------------------

# <span id="BBB">é™„å½•</span>

> [BiscuitOS Home](https://biscuitos.github.io/)
>
> [BiscuitOS Driver](https://biscuitos.github.io/blog/BiscuitOS_Catalogue/)
>
> [BiscuitOS Kernel Build](https://biscuitos.github.io/blog/Kernel_Build/)
>
> [Linux Kernel](https://www.kernel.org/)
>
> [Bootlin: Elixir Cross Referencer](https://elixir.bootlin.com/linux/latest/source)
>
> [æ­å»ºé«˜æ•ˆçš„ Linux å¼€å‘ç¯å¢ƒ](https://biscuitos.github.io/blog/Linux-debug-tools/)

## èµèµä¸€ä¸‹å§ ğŸ™‚

![MMU](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/BiscuitOS/kernel/HAB000036.jpg)
