---
layout: post
title:  "å†…æ ¸åŒé“¾è¡¨"
date:   2019-05-26 16:55:30 +0800
categories: [HW]
excerpt: å†…æ ¸åŒé“¾è¡¨.
tags:
  - Bidirect-list
---

![DTS](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/BiscuitOS/kernel/IND00000L.jpg)

> [Github: Bidirect-list](https://github.com/BiscuitOS/HardStack/tree/master/Algorithem/list/bindirect-list)
>
> Email: BuddyZhang1 <buddy.zhang@aliyun.com>

# ç›®å½•

> - [å†…æ ¸åŒé“¾è¡¨åŸç†](#å†…æ ¸åŒé“¾è¡¨åŸç†)
>
> - [å†…æ ¸åŒé“¾è¡¨æœ€å°å®è·µ](#å†…æ ¸åŒé“¾è¡¨æœ€å°å®è·µ)
>
> - [å†…æ ¸åŒé“¾è¡¨åŸºæœ¬æ“ä½œ](#å†…æ ¸åŒé“¾è¡¨åŸºæœ¬æ“ä½œ)
>
>   - [åŒé“¾è¡¨è¡¨å¤´ç›¸å…³æ“ä½œ](#åŒé“¾è¡¨è¡¨å¤´ç›¸å…³æ“ä½œ)
>
>   - [åŒé“¾è¡¨çŠ¶æ€æ£€æŸ¥æ“ä½œ](#åŒé“¾è¡¨çŠ¶æ€æ£€æŸ¥æ“ä½œ)
>
>   - [åŒé“¾è¡¨çš„èŠ‚ç‚¹å¢åŠ æ“ä½œ](#åŒé“¾è¡¨çš„èŠ‚ç‚¹å¢åŠ æ“ä½œ)
>
>   - [åŒé“¾è¡¨çš„èŠ‚ç‚¹åˆ é™¤æ“ä½œ](#åŒé“¾è¡¨çš„èŠ‚ç‚¹åˆ é™¤æ“ä½œ)
>
>   - [åŒé“¾è¡¨çš„èŠ‚ç‚¹ä¿®æ”¹æ“ä½œ](#åŒé“¾è¡¨çš„èŠ‚ç‚¹ä¿®æ”¹æ“ä½œ)
>
>   - [åŒé“¾è¡¨çš„åˆå¹¶æ“ä½œ](#åŒé“¾è¡¨çš„åˆå¹¶æ“ä½œ)
>
>   - [åŒé“¾è¡¨çš„éå†æ“ä½œ](#åŒé“¾è¡¨çš„éå†æ“ä½œ)
>
> - [å†…æ ¸åŒé“¾è¡¨è¿›é˜¶ç ”ç©¶](#å†…æ ¸åŒé“¾è¡¨è¿›é˜¶ç ”ç©¶)
>
>   - [å†…æ ¸åŒé“¾è¡¨éå†ï¼šå¸¦ safe å’Œä¸å¸¦ safe çš„åŒºåˆ«](https://biscuitos.github.io/blog/LIST_ADV_safe/#header)
>
>   - [å†…æ ¸ä¸­æ ¸å¿ƒåŒé“¾è¡¨](https://biscuitos.github.io/blog/LIST_core_list/)
>
> - [åº”ç”¨ç¨‹åºä¸­éƒ¨ç½²åŒé“¾è¡¨](https://biscuitos.github.io/blog/Tree_LIST_UserArrange/)
>
> - [å†…æ ¸åŒé“¾è¡¨ API](#LISTAPI)
>
> - [é™„å½•](#é™„å½•)

---------------------------------------------
<span id="å†…æ ¸åŒé“¾è¡¨åŸç†"></span>

![DTS](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/BiscuitOS/kernel/IND00000S.jpg)

### é“¾è¡¨

é“¾è¡¨æ˜¯ Linux å†…æ ¸ä¸­æœ€ç®€å•ã€æœ€æ™®é€šçš„æ•°æ®ç»“æ„ã€‚é“¾è¡¨æ˜¯ä¸€ç§å­˜æ”¾å’Œæ“ä½œå¯å˜æ•°é‡å…ƒç´ (å¸¸ç§°ä¸ºèŠ‚ç‚¹)
çš„æ•°æ®ç»“æ„ã€‚é“¾è¡¨å’Œé™æ€æ•°ç»„çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒæ‰€åŒ…å«çš„å…ƒç´ éƒ½æ˜¯åŠ¨æ€åˆ›å»ºå¹¶æ’å…¥é“¾è¡¨çš„ï¼Œåœ¨ç¼–è¯‘æ—¶
ä¸å¿…çŸ¥é“å…·ä½“éœ€è¦åˆ›å»ºå¤šå°‘ä¸ªå…ƒç´ ã€‚å¦å¤–ä¹Ÿå› ä¸ºé“¾è¡¨ä¸­æ¯ä¸ªå…ƒç´ çš„åˆ›å»ºæ—¶é—´å„ä¸ç›¸åŒï¼Œæ‰€ä»¥å®ƒä»¬åœ¨å†…å­˜
ä¸­æ— é¡»å ç”¨è¿ç»­å†…å­˜åŒºã€‚æ­£æ˜¯å› ä¸ºå…ƒç´ ä¸è¿ç»­åœ°å­˜æ”¾ï¼Œæ‰€ä»¥å„å…ƒç´ éœ€è¦é€šè¿‡æŸç§æ–¹å¼è¢«è¿æ¥åœ¨ä¸€èµ·ã€‚
ç”±äºé“¾æ¥çš„æ–¹å¼ä¸åŒï¼Œé“¾è¡¨åˆåˆ†ä¸ºå•é“¾è¡¨ã€åŒé“¾è¡¨ã€ç¯å½¢é“¾è¡¨ç­‰ã€‚

##### å•é“¾è¡¨

æ­£æ˜¯å› ä¸ºå…ƒç´ ä¸è¿ç»­åœ°å­˜æ”¾ï¼Œæ‰€ä»¥å„å…ƒç´ éœ€è¦é€šè¿‡æŸç§æ–¹å¼è¢«è¿æ¥åœ¨ä¸€èµ·ï¼Œäºæ˜¯æ¯ä¸ªå…ƒç´ éƒ½åŒ…å«ä¸€ä¸ª
æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼Œå½“æœ‰å…ƒç´ åŠ å…¥é“¾è¡¨æˆ–ä»é“¾è¡¨ä¸­åˆ é™¤å…ƒç´ æ—¶ï¼Œç®€å•çš„è°ƒæ•´æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ
å°±å¯ä»¥ï¼Œè¿™æ ·ç®€å•çš„é“¾è¡¨ç§°ä¸ºå•é“¾è¡¨ã€‚å•é“¾è¡¨å¯ä»¥ç®€å•å®šä¹‰å¦‚ä¸‹ï¼š

{% highlight ruby %}
struct list_elem {
  struct list_elem *next;
};
{% endhighlight %}

å•é“¾è¡¨ä¸­åªåŒ…å«ä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå•é“¾è¡¨ç»„ç»‡å¦‚ä¸‹å›¾ï¼š

![DTS](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/BiscuitOS/boot/BOOT000056.png)

##### åŒé“¾è¡¨

æ­£æ˜¯å› ä¸ºå…ƒç´ ä¸è¿ç»­åœ°å­˜æ”¾ï¼Œæ‰€ä»¥å„å…ƒç´ éœ€è¦é€šè¿‡æŸç§æ–¹å¼è¢«è¿æ¥åœ¨ä¸€èµ·ï¼Œäºæ˜¯æ¯ä¸ªå…ƒç´ éƒ½åŒ…å«ä¸€ä¸ª
æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼Œä»¥åŠä¸€ä¸ªæŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå› ä¸ºä»–ä»¬å¯ä»¥åŒæ—¶å‘å‰æˆ–å‘åç›¸äº’é“¾æ¥ï¼Œ
æ‰€ä»¥è¿™ç§é“¾è¡¨è¢«ç§°ä¸ºåŒé“¾è¡¨ã€‚å½“æœ‰å…ƒç´ åŠ å…¥é“¾è¡¨æˆ–ä»é“¾è¡¨ä¸­åˆ é™¤å…ƒç´ æ—¶ï¼Œéœ€è¦å¯¹é“¾è¡¨çš„å‰ä¸€ä¸ªèŠ‚ç‚¹å’Œå
ä¸€ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦è¿›è¡Œä¿®æ”¹ã€‚åŒé“¾è¡¨å¯ä»¥ç®€å•å®šä¹‰å¦‚ä¸‹ï¼š

{% highlight ruby %}
struct list_elem {
  struct list_elem *next;
  struct list_elem *prev;
};
{% endhighlight %}

åŒé“¾è¡¨ä¸­åŒ…å«ä¸€ä¸ªæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆå’Œä¸€ä¸ªæŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼ŒåŒé“¾è¡¨ç»„ç»‡å¦‚ä¸‹å›¾ï¼š

![DTS](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/BiscuitOS/boot/BOOT000057.png)

### å†…æ ¸åŒé“¾è¡¨

Linux å†…æ ¸æä¾›äº†ä¸€ç§åŒé“¾è¡¨çš„å®ç°æ–¹å¼ï¼Œä»¥æ­¤åŒé“¾è¡¨ä¸ºä¼—å¤šæ•°æ®ç»“æ„æä¾›äº†é“¾è¡¨æ”¯æŒï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š

{% highlight ruby %}
include/linux/list.h

struct list_head {
  struct list_head *next;
  struct list_head *prev;
};
{% endhighlight %}

å†…æ ¸ä½¿ç”¨ struct list_head ç»“æ„å®šä¹‰äº†åŒé“¾è¡¨çš„åŸºç¡€å…ƒæ•°æ®ï¼Œç»“æ„åªåŒ…å«äº†ä¸¤ä¸ªæŒ‡é’ˆï¼Œç”¨äº
ä¹‹å‰å‰ä¸€ä¸ªèŠ‚ç‚¹å’Œåä¸€ä¸ªèŠ‚ç‚¹ã€‚å†…æ ¸å°†è¿™ä¸ªç»“æ„åµŒå…¥å¤šä¼—å¤šæ•°æ®ç»“æ„ä¸­ï¼Œä»¥æ­¤æ„é€ å¤æ‚çš„åŠŸèƒ½ã€‚

---------------------------------------------
<span id="å†…æ ¸åŒé“¾è¡¨æœ€å°å®è·µ"></span>

![DTS](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/BiscuitOS/kernel/IND00000H.jpg)

### å†…æ ¸åŒé“¾è¡¨æœ€å°å®è·µ

å†…æ ¸æä¾›äº† struct list_head ä½œä¸ºåŒé“¾è¡¨çš„å…ƒæ•°æ®ï¼Œå¹¶æä¾›äº†ä¸€æ•´å¥—çš„é“¾è¡¨æ“ä½œå‡½æ•°ï¼Œå¼€å‘è€…
å¯ä»¥å°†åŒé“¾è¡¨å†…åµŒåˆ°ç§æœ‰æ•°æ®ç»“æ„ä¸­ï¼Œç„¶åä½¿ç”¨å†…æ ¸æä¾›çš„æ¥å£åœ¨ç§æœ‰æ•°æ®ç»“æ„ä¸­ä½¿ç”¨åŒé“¾è¡¨ã€‚æœ¬èŠ‚
çš„æœ€å°å®è·µåŸºäº Linux 5.0ï¼Œå¦‚æœè¿˜æœªæ­å»º Linux 5.0 å¼€å‘ç¯å¢ƒï¼Œè¯·å‚è€ƒæ–‡æ¡£ï¼š

> [Linux 5.0 å†…æ ¸å¼€å‘ç¯å¢ƒå¿«é€Ÿæ­å»º](https://biscuitos.github.io/blog/Linux-5.0-arm32-Usermanual/)

å‡†å¤‡å¥½å¼€å‘ç¯å¢ƒåï¼Œå¼€å‘è€…ç¼–å†™ä¸€ä¸ªç‹¬ç«‹çš„é©±åŠ¨ï¼Œä»¥æ­¤å®è·µå†…æ ¸åŒé“¾è¡¨ã€‚é©±åŠ¨æºç å¦‚ä¸‹ï¼š

{% highlight c %}
/*
 * bindirect-list
 *
 * (C) 20179.04.25 <buddy.zhang@aliyun.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 */

/*
 * bidirect-list
 *
 * +-----------+<--o    +-----------+<--o    +-----------+<--o    +-----------+
 * |           |   |    |           |   |    |           |   |    |           |
 * |      prev |   o----| prev      |   o----| prev      |   o----| prev      |
 * | list_head |        | list_head |        | list_head |        | list_head |
 * |      next |---o    |      next |---o    |      next |---o    |      next |
 * |           |   |    |           |   |    |           |   |    |           |
 * +-----------+   o--->+-----------+   o--->+-----------+   o--->+-----------+
 *
 */

#include <linux/kernel.h>
#include <linux/init.h>

/* header of list */
#include <linux/list.h>

/* private structure */
struct node {
    const char *name;
    struct list_head list;
};

/* Initialize a group node structure */
static struct node node0 = { .name = "BiscuitOS_node0", };
static struct node node1 = { .name = "BiscuitOS_node1", };
static struct node node2 = { .name = "BiscuitOS_node2", };
static struct node node3 = { .name = "BiscuitOS_node3", };
static struct node node4 = { .name = "BiscuitOS_node4", };
static struct node node5 = { .name = "BiscuitOS_node5", };
static struct node node6 = { .name = "BiscuitOS_node6", };

/* Declaration and implement a bindirect-list */
LIST_HEAD(BiscuitOS_list);

static __init int bindirect_demo_init(void)
{
	struct node *np;

	/* add a new entry on special entry */
	list_add(&node0.list, &BiscuitOS_list);
	list_add(&node1.list, &BiscuitOS_list);
	list_add(&node2.list, &BiscuitOS_list);
	list_add(&node3.list, &BiscuitOS_list);
	list_add(&node4.list, &BiscuitOS_list);
	list_add(&node5.list, &BiscuitOS_list);
	list_add(&node6.list, &BiscuitOS_list);

	/* Traverser all node on bindirect-list */
	list_for_each_entry(np, &BiscuitOS_list, list)
		printk("%s\n", np->name);

	return 0;
}
device_initcall(bindirect_demo_init);
{% endhighlight %}

é©±åŠ¨ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªç§æœ‰æ•°æ®ç»“æ„ struct node, è¯¥ç»“æ„ä¸­å†…åµŒäº†ä¸€ä¸ªåŒé“¾è¡¨ struct list_head
å®ä¾‹ï¼Œæ¥ç€åˆ›å»ºäº†ä¸€ä¸ªåŒé“¾è¡¨çš„è¡¨å¤´ BiscuitOS_list, ä»¥åŠåˆå§‹åŒ–äº† 7 ä¸ª struct node å®ä¾‹ã€‚
æœ€åè°ƒç”¨ list_add() å‡½æ•°å°†ç§æœ‰ node å®ä¾‹æ·»åŠ åˆ°åŒé“¾è¡¨ä¸­ï¼Œå¹¶ä½¿ç”¨ list_for_each_entry()
å‡½æ•°éå†æ‰€æœ‰çš„èŠ‚ç‚¹ã€‚

ç¼–å†™å¥½é©±åŠ¨ä¹‹åï¼Œè¿›è¡Œé©±åŠ¨çš„å®‰è£…ã€‚é©±åŠ¨çš„å®‰è£…å¾ˆç®€å•ï¼Œé¦–å…ˆå°†é©±åŠ¨æ”¾åˆ°æºç çš„ drivers/BiscuitOS/
ç›®å½•ä¸‹ï¼Œå‘½åä¸º list.cï¼Œç„¶åä¿®æ”¹ Kconfig æ–‡ä»¶ï¼Œæ·»åŠ å†…å®¹å‚è€ƒå¦‚ä¸‹ï¼š

{% highlight bash %}
diff --git a/drivers/BiscuitOS/Kconfig b/drivers/BiscuitOS/Kconfig
index 4edc5a5..1a9abee 100644
--- a/drivers/BiscuitOS/Kconfig
+++ b/drivers/BiscuitOS/Kconfig
@@ -6,4 +6,14 @@ if BISCUITOS_DRV
config BISCUITOS_MISC
        bool "BiscuitOS misc driver"
+config BISCUITOS_LIST
+       bool "Bindirect-list"
+
+if BISCUITOS_LIST
+
+config DEBUG_BISCUITOS_LIST
+       bool "list mini practice"
+
+endif # BISCUITOS_LIST
+
endif # BISCUITOS_DRV
{% endhighlight %}

æ¥ç€ä¿®æ”¹ Makefileï¼Œè¯·å‚è€ƒå¦‚ä¸‹ä¿®æ”¹ï¼š

{% highlight bash %}
diff --git a/drivers/BiscuitOS/Makefile b/drivers/BiscuitOS/Makefile
index 82004c9..9909149 100644
--- a/drivers/BiscuitOS/Makefile
+++ b/drivers/BiscuitOS/Makefile
@@ -1 +1,2 @@
obj-$(CONFIG_BISCUITOS_MISC)     += BiscuitOS_drv.o
+obj-$(CONFIG_BISCUITOS_LIST)    += list.o
--
{% endhighlight %}

å®‰è£…å®Œé©±åŠ¨ä¹‹åï¼Œè¿›è¡Œé©±åŠ¨é…ç½®ï¼Œä»¥æ­¤å°†é©±åŠ¨ç¼–è¯‘è¿›å†…æ ¸ã€‚é©±åŠ¨é…ç½®è¯·å‚è€ƒä¸‹é¢æ–‡ç« ä¸­å…³äºé©±åŠ¨é…ç½®ä¸€èŠ‚ã€‚
åœ¨é…ç½®ä¸­ï¼Œå‹¾é€‰å¦‚ä¸‹é€‰é¡¹ï¼Œå¦‚ä¸‹ï¼š

{% highlight bash %}
Device Driver--->
    [*]BiscuitOS Driver--->
        [*]Bindirect-list
            [*]list mini practice
{% endhighlight %}

å…·ä½“è¿‡ç¨‹è¯·å‚è€ƒï¼š

> [Linux 5.0 å¼€å‘ç¯å¢ƒæ­å»º -- é©±åŠ¨é…ç½®](https://biscuitos.github.io/blog/Linux-5.0-arm32-Usermanual/#%E9%A9%B1%E5%8A%A8%E9%85%8D%E7%BD%AE)

é…ç½®å®Œé©±åŠ¨ä¹‹åï¼Œè¿›è¡Œé©±åŠ¨ç¼–è¯‘ã€‚é©±åŠ¨ç¼–è¯‘ä¹Ÿè¯·å‚è€ƒä¸‹é¢æ–‡ç« å…³äºé©±åŠ¨ç¼–è¯‘ä¸€èŠ‚ï¼š

> [Linux 5.0 å¼€å‘ç¯å¢ƒæ­å»º -- é©±åŠ¨ç¼–è¯‘](https://biscuitos.github.io/blog/Linux-5.0-arm32-Usermanual/#%E7%BC%96%E8%AF%91%E9%A9%B1%E5%8A%A8)

é©±åŠ¨ç¼–è¯‘å®Œä¹‹åå°±æ˜¯é©±åŠ¨è¿è¡Œã€‚é©±åŠ¨çš„è¿è¡Œï¼Œè¯·å‚è€ƒä¸‹é¢æ–‡ç« ä¸­å…³äºé©±åŠ¨è¿è¡Œä¸€èŠ‚ï¼š

> [Linux 5.0 å¼€å‘ç¯å¢ƒæ­å»º -- é©±åŠ¨è¿è¡Œ](https://biscuitos.github.io/blog/Linux-5.0-arm32-Usermanual/#%E9%A9%B1%E5%8A%A8%E8%BF%90%E8%A1%8C)

å¯åŠ¨å†…æ ¸ï¼Œå¹¶æ‰“å°å¦‚ä¸‹ä¿¡æ¯ï¼š

{% highlight ruby %}
usbcore: registered new interface driver usbhid
usbhid: USB HID core driver
BiscuitOS_node6
BiscuitOS_node5
BiscuitOS_node4
BiscuitOS_node3
BiscuitOS_node2
BiscuitOS_node1
BiscuitOS_node0
aaci-pl041 10004000.aaci: ARM AC'97 Interface PL041 rev0 at 0x10004000, irq 24
aaci-pl041 10004000.aaci: FIFO 512 entries
{% endhighlight %}

é€šè¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œå°±å¯ä»¥å®Œæˆå†…æ ¸åŒé“¾è¡¨çš„æœ€å°å®è·µã€‚åœ¨å®è·µä¸­ï¼Œåˆ›å»ºä¸€ä¸ª

---------------------------------------------
<span id="å†…æ ¸åŒé“¾è¡¨åŸºæœ¬æ“ä½œ"></span>

![DTS](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/BiscuitOS/kernel/IND00000F.jpg)

### å†…æ ¸åŒé“¾è¡¨åŸºæœ¬æ“ä½œ

Linux å†…æ ¸ä¸ºåŒé“¾è¡¨æä¾›äº†ä¸°å¯Œçš„æ¥å£å‡½æ•°ï¼Œä»¥æ»¡è¶³ä¸åŒçš„ä½¿ç”¨éœ€æ±‚ã€‚åŒé“¾è¡¨çš„æ“ä½œåŸºæœ¬åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š

> - [åŒé“¾è¡¨è¡¨å¤´ç›¸å…³æ“ä½œ](#åŒé“¾è¡¨è¡¨å¤´ç›¸å…³æ“ä½œ)
>
> - [åŒé“¾è¡¨çŠ¶æ€æ£€æŸ¥æ“ä½œ](#åŒé“¾è¡¨çŠ¶æ€æ£€æŸ¥æ“ä½œ)
>
> - [åŒé“¾è¡¨çš„èŠ‚ç‚¹å¢åŠ æ“ä½œ](#åŒé“¾è¡¨çš„èŠ‚ç‚¹å¢åŠ æ“ä½œ)
>
> - [åŒé“¾è¡¨çš„èŠ‚ç‚¹åˆ é™¤æ“ä½œ](#åŒé“¾è¡¨çš„èŠ‚ç‚¹åˆ é™¤æ“ä½œ)
>
> - [åŒé“¾è¡¨çš„èŠ‚ç‚¹ä¿®æ”¹æ“ä½œ](#åŒé“¾è¡¨çš„èŠ‚ç‚¹ä¿®æ”¹æ“ä½œ)
>
> - [åŒé“¾è¡¨çš„åˆå¹¶æ“ä½œ](#åŒé“¾è¡¨çš„åˆå¹¶æ“ä½œ)
>
> - [åŒé“¾è¡¨çš„éå†æ“ä½œ](#åŒé“¾è¡¨çš„éå†æ“ä½œ)

### <span id="åŒé“¾è¡¨è¡¨å¤´ç›¸å…³æ“ä½œ">åŒé“¾è¡¨è¡¨å¤´ç›¸å…³æ“ä½œ</span>

åœ¨ä½¿ç”¨åŒé“¾è¡¨ä¹‹å‰ï¼Œå†…æ ¸éœ€è¦å»ºç«‹ä¸€ä¸ªåŒé“¾è¡¨è¡¨å¤´ï¼Œå†…æ ¸æä¾›äº†å¤šç§æ¥å£ç”¨äºè¡¨å¤´çš„å£°æ˜ã€å®šä¹‰ï¼Œä»¥åŠ
åˆå§‹åŒ–ï¼Œå…·ä½“æ¥å£å¦‚ä¸‹ï¼š

> - [INIT_LIST_HEAD: åˆå§‹åŒ–åŒé“¾è¡¨è¡¨å¤´](https://biscuitos.github.io/blog/LIST_INIT_LIST_HEAD/)
>
> - [LIST_HEAD: å£°æ˜å¹¶åˆå§‹åŒ–ä¸€ä¸ªåŒé“¾è¡¨è¡¨å¤´](https://biscuitos.github.io/blog/LIST_LIST_HEAD/)
>
> - [LIST_HEAD_INIT: åˆå§‹åŒ–åŒé“¾è¡¨è¡¨å¤´](https://biscuitos.github.io/blog/LIST_LIST_HEAD_INIT/)

### <span id="åŒé“¾è¡¨çŠ¶æ€æ£€æŸ¥æ“ä½œ">åŒé“¾è¡¨çŠ¶æ€æ£€æŸ¥æ“ä½œ</span>

åœ¨ä½¿ç”¨åŒé“¾è¡¨è¿‡ç¨‹ä¸­ï¼Œéœ€è¦è·å¾—åŒé“¾è¡¨çš„çŠ¶æ€ä¿¡æ¯ï¼Œå†…æ ¸æä¾›äº†å¾ˆå¤šæ¥å£ç”¨äºè·å¾—åŒé“¾è¡¨çš„çŠ¶æ€ä¿¡æ¯ï¼Œ
å…·ä½“æ¥å£å¦‚ä¸‹ï¼š

> - [\_\_list_add_valid: æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ä¹‹å‰ï¼Œæ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å¯ç”¨](https://biscuitos.github.io/blog/LIST___list_add_valid/)
>
> - [\_\_list_del_entry_valid: åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ä¹‹å‰ï¼Œæ£€æŸ¥æ£€ç‚¹æ˜¯å¦å¯ç”¨](https://biscuitos.github.io/blog/LIST___list_del_entry_valid/)
>
> - [list_is_last: æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦ä½äºé“¾è¡¨æœ«å°¾](https://biscuitos.github.io/blog/LIST_list_is_last/)
>
> - [list_empty: æ£€æŸ¥é“¾è¡¨æ˜¯å¦ä¸ºç©º](https://biscuitos.github.io/blog/LIST_list_empty/)
>
> - [list_empty_careful: å‡½æ•°åˆ¤æ–­ä¸€ä¸ªé“¾è¡¨æ˜¯å¦ä¸ºç©ºé“¾è¡¨ï¼Œå¹¶ç¡®å®šå…¶ä»– CPU å¹¶æœªä¿®æ”¹è¿‡é“¾è¡¨](https://biscuitos.github.io/blog/LIST_list_empty_careful/)
>
> - [list_is_singular: åˆ¤æ–­é“¾è¡¨æ˜¯å¦åªå«æœ‰ä¸€ä¸ªèŠ‚ç‚¹](https://biscuitos.github.io/blog/LIST_list_is_singular/)

### <span id="åŒé“¾è¡¨çš„èŠ‚ç‚¹å¢åŠ æ“ä½œ">åŒé“¾è¡¨çš„èŠ‚ç‚¹å¢åŠ æ“ä½œ</span>

å†…æ ¸æä¾›ä¸€ç³»åˆ—çš„æ¥å£ç”¨äºå‘åŒé“¾è¡¨ä¸­æ·»åŠ èŠ‚ç‚¹ï¼Œå…·ä½“æ¥å£å¦‚ä¸‹ï¼š

> - [\_\_list_add: å‘é“¾è¡¨ä¸­æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹](https://biscuitos.github.io/blog/LIST___list_add/)
>
> - [list_add: å‘é“¾è¡¨å¤´éƒ¨æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹](https://biscuitos.github.io/blog/LIST_list_add/)
>
> - [list_add_tail: å‘é“¾è¡¨çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹](https://biscuitos.github.io/blog/LIST_list_add_tail/)

### <span id="åŒé“¾è¡¨çš„èŠ‚ç‚¹åˆ é™¤æ“ä½œ">åŒé“¾è¡¨çš„èŠ‚ç‚¹åˆ é™¤æ“ä½œ</span>

å†…æ ¸æä¾›äº†ä¸€ç³»åˆ—æ¥å£ç”¨äºä»åŒé“¾è¡¨ä¸­åˆ é™¤èŠ‚ç‚¹ï¼Œå…·ä½“æ¥å£å¦‚ä¸‹ï¼š

> - [\_\_list_del: ä»åŒé“¾è¡¨ä¸­åˆ é™¤æŒ‡å®šèŠ‚ç‚¹](https://biscuitos.github.io/blog/LIST___list_del/)
>
> - [\_\_list_del_entry: ä»åŒé“¾è¡¨ä¸­åˆ é™¤æŒ‡å®šèŠ‚ç‚¹](https://biscuitos.github.io/blog/LIST___list_del_entry/)
>
> - [list_del: ä»é“¾è¡¨ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹](https://biscuitos.github.io/blog/LIST_list_del/)
>
> - [list_move: ä»é“¾è¡¨ä¸­ç§»é™¤ä¸€ä¸ªèŠ‚ç‚¹å¹¶åŠ å…¥å¦ä¸€ä¸ªé“¾è¡¨çš„è¡¨å¤´](https://biscuitos.github.io/blog/LIST_list_move/)
>
> - [list_move_tail: å°†èŠ‚ç‚¹ä»å½“å‰é“¾è¡¨ç§»åŠ¨åˆ°æ–°é“¾è¡¨](https://biscuitos.github.io/blog/LIST_list_move_tail/)
>
> - [list_del_init: ä»é“¾è¡¨ä¸­ç§»é™¤èŠ‚ç‚¹å¹¶åˆå§‹åŒ–èŠ‚ç‚¹](https://biscuitos.github.io/blog/LIST_list_del_init/)

### <span id="åŒé“¾è¡¨çš„èŠ‚ç‚¹ä¿®æ”¹æ“ä½œ">åŒé“¾è¡¨çš„èŠ‚ç‚¹ä¿®æ”¹æ“ä½œ</span>

å†…æ ¸æä¾›äº†é“¾è¡¨èŠ‚ç‚¹çš„ä¿®æ”¹æ“ä½œï¼ŒåŒ…æ‹¬ç§»åŠ¨é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ï¼Œæ›¿æ¢èŠ‚ç‚¹ç­‰æ“ä½œï¼Œå…·ä½“å¦‚ä¸‹ï¼š

> - [list_replace: æ›¿æ¢ç‰¹å®šçš„èŠ‚ç‚¹](https://biscuitos.github.io/blog/LIST_list_replace/)
>
> - [list_replace_init: æ›¿æ¢ç‰¹å®šçš„èŠ‚ç‚¹ï¼Œå¹¶åˆå§‹åŒ–è¢«æ›¿æ¢çš„èŠ‚ç‚¹](https://biscuitos.github.io/blog/LIST_list_replace_init/)
>
> - [list_move: å°†èŠ‚ç‚¹ç§»åŠ¨åˆ°æ–°é“¾è¡¨çš„å¤´éƒ¨](https://biscuitos.github.io/blog/LIST_list_move/)
>
> - [list_bulk_move_tail: å°†é“¾è¡¨ä¸­å¤šä¸ªèŠ‚ç‚¹ç§»åŠ¨åˆ°æ–°é“¾è¡¨çš„å°¾éƒ¨](https://biscuitos.github.io/blog/LIST_list_bulk_move_tail/)
>
> - [list_rotate_left: å°†é“¾è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ç§»åŠ¨é“¾è¡¨æœ«å°¾](https://biscuitos.github.io/blog/LIST_list_rotate_left/)
>
> - [\_\_list_cut_position: å°†é“¾è¡¨ä»ç‰¹å®šä½ç½®å‰ªæ–­æˆä¸¤ä¸ªé“¾è¡¨](https://biscuitos.github.io/blog/LIST___list_cut_position/)
>
> - [list_cut_position: å°†é“¾è¡¨ä»ç‰¹å®šä½ç½®å‰ªæ–­æˆä¸¤ä¸ªé“¾è¡¨](https://biscuitos.github.io/blog/LIST_list_cut_position/)
>
> - [list_cut_before: å°†é“¾è¡¨ä»ç‰¹å®šä½ç½®å‰ªæ–­ä»ä¸¤ä¸ªé“¾è¡¨ï¼Œä¿ç•™å‰æ®µ](https://biscuitos.github.io/blog/LIST_list_cut_before/)
>
> - []

### <span id="åŒé“¾è¡¨çš„åˆå¹¶æ“ä½œ">åŒé“¾è¡¨çš„åˆå¹¶æ“ä½œ</span>

å†…æ ¸ä¹Ÿæä¾›äº†é“¾è¡¨åˆå¹¶æ“ä½œï¼Œå…·ä½“æ¥å£å¦‚ä¸‹ï¼š

> - [list_splice_init: å°†æ–°é“¾è¡¨åˆå¹¶åˆ°é“¾è¡¨å¤´éƒ¨ï¼Œå¹¶åˆå§‹åŒ–æ–°é“¾è¡¨è¡¨å¤´](https://biscuitos.github.io/blog/LIST_list_splice_init/)
>
> - [\_\_list_splice: å°†é“¾è¡¨æ’å…¥åˆ°é“¾è¡¨é‡Œ](https://biscuitos.github.io/blog/LIST___list_splice/)
>
> - [list_splice: å°†é“¾è¡¨æ’å…¥åˆ°é“¾è¡¨å¤´éƒ¨](https://biscuitos.github.io/blog/LIST_list_splice/)
>
> - [list_splice_tail: å°†é“¾è¡¨æ’å…¥åˆ°é“¾è¡¨å°¾éƒ¨](https://biscuitos.github.io/blog/LIST_list_splic_tail/)
>
> - [list_splice_tail_init: å°†é“¾è¡¨æ’å…¥åˆ°é“¾è¡¨æœ«å°¾ï¼Œå¹¶åˆå§‹åŒ–é“¾è¡¨](https://biscuitos.github.io/blog/LIST_list_splice_tail_init/)

### <span id="åŒé“¾è¡¨çš„éå†æ“ä½œ">åŒé“¾è¡¨çš„éå†æ“ä½œ</span>

å†…æ ¸æä¾›äº†å¤šç§æ–¹å¼çš„éå†é“¾è¡¨çš„æ¥å£ï¼Œ(åµŒå¥—èŠ‚ç‚¹çš„æ•°æ®ç»“æ„ç§°ä¸ºå…¥å£)å…·ä½“å¦‚ä¸‹ï¼š

> - [list_entry: è·å¾—èŠ‚ç‚¹å¯¹åº”çš„å…¥å£](https://biscuitos.github.io/blog/LIST_list_entry/)
>
> - [list_first_entry: è·å¾—ç¬¬ä¸€ä¸ªå…¥å£](https://biscuitos.github.io/blog/LIST_list_first_entry/)
>
> - [list_last_entry: è·å¾—æœ€åä¸€ä¸ªå…¥å£](https://biscuitos.github.io/blog/LIST_list_last_entry/)
>
> - [list_first_entry_or_null: è·å¾—ç¬¬ä¸€ä¸ªå…¥å£æˆ– NULL](https://biscuitos.github.io/blog/LIST_list_first_entry_or_null/)
>
> - [list_next_entry: è·å¾—ä¸‹ä¸€ä¸ªå…¥å£](https://biscuitos.github.io/blog/LIST_list_next_entry/)
>
> - [list_prev_entry: è·å¾—å‰ä¸€ä¸ªå…¥å£](https://biscuitos.github.io/blog/LIST_list_prev_entry/)
>
> - [list_for_each: æ­£åºéå†æ‰€æœ‰èŠ‚ç‚¹](https://biscuitos.github.io/blog/LIST_list_for_each/)
>
> - [list_for_each_prev: å€’å™éå†æ‰€æœ‰èŠ‚ç‚¹](https://biscuitos.github.io/blog/LIST_list_for_each_prev/)
>
> - [list_for_each_safe: å®‰å…¨æ­£åºéå†æ‰€æœ‰èŠ‚ç‚¹](https://biscuitos.github.io/blog/LIST_list_for_each_safe/)
>
> - [list_for_each_prev_safe: å®‰å…¨å€’å™éå†æ‰€æœ‰èŠ‚ç‚¹](https://biscuitos.github.io/blog/LIST_list_for_each_prev_safe/)
>
> - [list_for_each_entry: æ­£åºéå†æ‰€æœ‰å…¥å£](https://biscuitos.github.io/blog/LIST_list_for_each_entry/)
>
> - [list_for_each_entry_reverse: å€’å™éå†æ‰€æœ‰å…¥å£](https://biscuitos.github.io/blog/LIST_list_for_each_entry_reverse/)
>
> - [list_prepare_entry: è·å¾—æŒ‡å®šå…¥å£](https://biscuitos.github.io/blog/LIST_list_prepare_entry/)
>
> - [list_for_each_entry_continue: ä»æŒ‡å®šå…¥å£å¼€å§‹æ­£åºéå†å‰©ä½™çš„å…¥å£](https://biscuitos.github.io/blog/LIST_list_for_each_entry_continue/)
>
> - [list_for_each_entry_continue_reverse: ä»æŒ‡å®šå…¥å£å¼€å§‹å€’å™éå†å‰©ä½™çš„å…¥å£](https://biscuitos.github.io/blog/LIST_list_for_each_entry_continue_reverse/)
>
> - [list_for_each_entry_from: ä»æŒ‡å®šå…¥å£æ­£åºéå†å‰©ä½™å…¥å£](https://biscuitos.github.io/blog/LIST_list_for_each_entry_from/)
>
> - [list_for_each_entry_from_reverse: ä»æŒ‡å®šå…¥å£å€’åºéå†å‰©ä½™å…¥å£](https://biscuitos.github.io/blog/LIST_list_for_each_entry_from_reverse/)
>
> - [list_for_each_entry_safe: å®‰å…¨æ­£åºéå†æ‰€æœ‰å…¥å£](https://biscuitos.github.io/blog/LIST_list_for_each_entry_safe/)
>
> - [list_for_each_entry_safe_continue: å®‰å…¨ä»æŒ‡å®šå…¥å£æ­£åºéå†å‰©ä½™å…¥å£](https://biscuitos.github.io/blog/LIST_list_for_each_entry_safe_continue/)
>
> - [list_for_each_entry_safe_from: å®‰å…¨ä»æŒ‡å®šå…¥å£æ­£åºéå†å‰©ä½™å…¥å£](https://biscuitos.github.io/blog/LIST_list_for_each_entry_safe_from/)
>
> - [list_for_each_entry_safe_reverse: å®‰å…¨ä»æŒ‡å®šå…¥å£å€’åºéå†å‰©ä½™å…¥å£](https://biscuitos.github.io/blog/LIST_list_for_each_entry_safe_reverse/)
>
> - [list_safe_reset_next: å®‰å…¨è·å¾—ä¸‹ä¸€ä¸ªå…¥å£](https://biscuitos.github.io/blog/LIST_list_safe_reset_next/)

---------------------------------------------
<span id="å†…æ ¸åŒé“¾è¡¨è¿›é˜¶ç ”ç©¶"></span>

![DTS](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/BiscuitOS/kernel/IND00000J.jpg)

### å†…æ ¸åŒé“¾è¡¨è¿›é˜¶ç ”ç©¶

> - [å†…æ ¸åŒé“¾è¡¨éå†ï¼šå¸¦ safe å’Œä¸å¸¦ safe çš„åŒºåˆ«](https://biscuitos.github.io/blog/LIST_ADV_safe/#header)
>
> - [å†…æ ¸ä¸­æ ¸å¿ƒåŒé“¾è¡¨](https://biscuitos.github.io/blog/LIST_core_list/)

---------------------------------------------
<span id="LISTAPI"></span>

![DTS](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/BiscuitOS/kernel/IND00000B.jpg)

> [INIT_LIST_HEAD](https://biscuitos.github.io/blog/LIST_INIT_LIST_HEAD/)
>
> [\_\_list_add](https://biscuitos.github.io/blog/LIST___list_add/)
>
> [list_add](https://biscuitos.github.io/blog/LIST_list_add/)
>
> [list_add_tail](https://biscuitos.github.io/blog/LIST_list_add_tail/)
>
> [\_\_list_add_valid](https://biscuitos.github.io/blog/LIST___list_add_valid/)
>
> [list_bulk_move_tail](https://biscuitos.github.io/blog/LIST_list_bulk_move_tail/)
>
> [list_cut_before](https://biscuitos.github.io/blog/LIST_list_cut_before/)
>
> [\_\_list_cut_position](https://biscuitos.github.io/blog/LIST___list_cut_position/)
>
> [list_cut_position](https://biscuitos.github.io/blog/LIST_list_cut_position/)
>
> [\_\_list_del](https://biscuitos.github.io/blog/LIST___list_del/)
>
> [list_del](https://biscuitos.github.io/blog/LIST_list_del/)
>
> [\_\_list_del_entry](https://biscuitos.github.io/blog/LIST___list_del_entry/)
>
> [\_\_list_del_entry_valid](https://biscuitos.github.io/blog/LIST___list_del_entry_valid/)
>
> [list_del_init](https://biscuitos.github.io/blog/LIST_list_del_init/)
>
> [list_empty](https://biscuitos.github.io/blog/LIST_list_empty/)
>
> [list_empty_careful](https://biscuitos.github.io/blog/LIST_list_empty_careful/)
>
> [list_entry](https://biscuitos.github.io/blog/LIST_list_entry/)
>
> [list_first_entry](https://biscuitos.github.io/blog/LIST_list_first_entry/)
>
> [list_first_entry_or_null](https://biscuitos.github.io/blog/LIST_list_first_entry_or_null/)
>
> [list_for_each](https://biscuitos.github.io/blog/LIST_list_for_each/)
>
> [list_for_each_entry](https://biscuitos.github.io/blog/LIST_list_for_each_entry/)
>
> [list_for_each_entry_continue](https://biscuitos.github.io/blog/LIST_list_for_each_entry_continue/)
>
> [list_for_each_entry_continue_reverse](https://biscuitos.github.io/blog/LIST_list_for_each_entry_continue_reverse/)
>
> [list_for_each_entry_from](https://biscuitos.github.io/blog/LIST_list_for_each_entry_from/)
>
> [list_for_each_entry_from_reverse](https://biscuitos.github.io/blog/LIST_list_for_each_entry_from_reverse/)
>
> [list_for_each_entry_reverse](https://biscuitos.github.io/blog/LIST_list_for_each_entry_reverse/)
>
> [list_for_each_entry_safe](https://biscuitos.github.io/blog/LIST_list_for_each_entry_safe/)
>
> [list_for_each_entry_safe_continue](https://biscuitos.github.io/blog/LIST_list_for_each_entry_safe_continue/)
>
> [list_for_each_entry_safe_from](https://biscuitos.github.io/blog/LIST_list_for_each_entry_safe_from/)
>
> [list_for_each_entry_safe_reverse](https://biscuitos.github.io/blog/LIST_list_for_each_entry_safe_reverse/)
>
> [list_for_each_prev](https://biscuitos.github.io/blog/LIST_list_for_each_prev/)
>
> [list_for_each_prev_safe](https://biscuitos.github.io/blog/LIST_list_for_each_prev_safe/)
>
> [list_for_each_safe](https://biscuitos.github.io/blog/LIST_list_for_each_safe/)
>
> [LIST_HEAD](https://biscuitos.github.io/blog/LIST_LIST_HEAD/)
>
> [LIST_HEAD_INIT](https://biscuitos.github.io/blog/LIST_LIST_HEAD_INIT/)
>
> [list_is_last](https://biscuitos.github.io/blog/LIST_list_is_last/)
>
> [list_is_singular](https://biscuitos.github.io/blog/LIST_list_is_singular/)
>
> [list_last_entry](https://biscuitos.github.io/blog/LIST_list_last_entry/)
>
> [list_move](https://biscuitos.github.io/blog/LIST_list_move/)
>
> [list_move_tail](https://biscuitos.github.io/blog/LIST_list_move_tail/)
>
> [list_next_entry](https://biscuitos.github.io/blog/LIST_list_next_entry/)
>
> [list_prepare_entry](https://biscuitos.github.io/blog/LIST_list_prepare_entry/)
>
> [list_prev_entry](https://biscuitos.github.io/blog/LIST_list_prev_entry/)
>
> [list_replace](https://biscuitos.github.io/blog/LIST_list_replace/)
>
> [list_replace_init](https://biscuitos.github.io/blog/LIST_list_replace_init/)
>
> [list_rotate_left](https://biscuitos.github.io/blog/LIST_list_rotate_left/)
>
> [list_safe_reset_next](https://biscuitos.github.io/blog/LIST_list_safe_reset_next/)
>
> [\_\_list_splice](https://biscuitos.github.io/blog/LIST___list_splice/)
>
> [list_splice](https://biscuitos.github.io/blog/LIST_list_splice/)
>
> [list_splice_init](https://biscuitos.github.io/blog/LIST_list_splice_init/)
>
> [list_splice_tail](https://biscuitos.github.io/blog/LIST_list_splic_tail/)
>
> [list_splice_tail_init](https://biscuitos.github.io/blog/LIST_list_splice_tail_init/)

-----------------------------------------------

# <span id="é™„å½•">é™„å½•</span>

> [BiscuitOS Home](https://biscuitos.github.io/)
>
> [BiscuitOS Driver](https://biscuitos.github.io/blog/BiscuitOS_Catalogue/)
>
> [BiscuitOS Kernel Build](https://biscuitos.github.io/blog/Kernel_Build/)
>
> [Linux Kernel](https://www.kernel.org/)
>
> [Bootlin: Elixir Cross Referencer](https://elixir.bootlin.com/linux/latest/source)
>
> [æ­å»ºé«˜æ•ˆçš„ Linux å¼€å‘ç¯å¢ƒ](https://biscuitos.github.io/blog/Linux-debug-tools/)

## èµèµä¸€ä¸‹å§ ğŸ™‚

![MMU](https://raw.githubusercontent.com/EmulateSpace/PictureSet/master/BiscuitOS/kernel/HAB000036.jpg)
